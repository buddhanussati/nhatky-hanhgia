<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	<link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#8b5cf6">
	<link rel="apple-touch-icon" href="./images/icon-192.png">
    <title>Nh·∫≠t K√Ω H√†nh Gi·∫£</title>
    <link href="./css/css.css" rel="stylesheet">
	<link href="./css/css2.css" rel="stylesheet">
 	<script src="./js/chart.js"></script>
	<script src="./js/phapcu.js"></script>
	<script src="./js/badges.js"></script>
</head>
<body>

<nav class="sidebar">
        <div class="logo"><i class="fas fa-hourglass-half"></i></div>
        <div class="nav-item active" onclick="app.switchView('dashboard')">
            <i class="fas fa-spa"></i><span class="nav-text">Nh·∫≠t k√Ω</span>
        </div>
        <div class="nav-item" onclick="app.switchView('calendar')">
            <i class="fas fa-ranking-star"></i><span class="nav-text">L·ªô tr√¨nh</span>
        </div>
        <div class="nav-item" onclick="app.switchView('reports')">
            <i class="fas fa-chart-pie"></i><span class="nav-text">T·ªïng h·ª£p</span>
        </div>
		<div class="nav-item" onclick="app.switchView('analytics')">
    <i class="fas fa-microscope"></i><span class="nav-text">Ph√¢n t√≠ch</span>
	
</div>
       <div class="nav-item" onclick="app.switchView('pro')">
    <i class="fas fa-telescope"></i><span class="nav-text">Kh√°m ph√°</span>
</div>
        
        
       <div class="nav-item" onclick="app.switchView('achievements')">
            <i class="fas fa-wreath-laurel"></i><span class="nav-text">PƒÅramƒ´</span>
        </div>
       
    </nav>


    <main class="main">
        <header>
            <div>
                <h1 id="page-title">Nh·∫≠t K√Ω H√†nh Gi·∫£</h1>
                <p style="color: var(--text-light); font-size: 14px;" id="current-date"></p>
            </div>
            
            <div class="user-stats">
   <div class="stat-item active-badge-container" onclick="app.openBadgePicker()" title="Nh·∫•n ƒë·ªÉ ƒë·ªïi PƒÅramƒ´">
    <div id="current-active-badge" class="badge-display">
        <i class="fas fa-gem"></i>
    </div>
</div>
    <div class="stat-item">
        <span class="stat-val" id="streak-disp">0 üî•</span>
        <span class="stat-label">Li√™n t·ª•c</span>
    </div>

    <div class="stat-item">
        <span class="stat-val" id="xp-disp">0</span>
        <span class="stat-label">Ch√°nh Ni·ªám</span>
    </div>

<div class="stat-item clickable" onclick="app.exportData()">
    <span class="stat-val" style="
        width: 24px; 
        height: 24px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 15px;"><i class="fas fa-save"></i></span>
</div>

 <div class="stat-item clickable" onclick="app.openIntroModal()">
    <span class="stat-val" style="
        border: 2px solid var(--text-light); 
        border-radius: 50%; 
        width: 24px; 
        height: 24px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 14px;">?</span>
</div>

    <button class="btn" onclick="app.openChoiceModal()">
        <i class="fas fa-plus"></i> M·ª•c ti√™u m·ªõi
    </button>
</div>
        </header>

        <section id="view-dashboard" class="view-section active">
            <div id="active-goals-container" class="dashboard-grid"></div>
            <div id="empty-msg" class="empty-state" style="display:none;">
                <i class="fas fa-clipboard-list" style="font-size: 40px; margin-bottom: 10px;"></i>
                <p>Ch∆∞a c√≥ m·ª•c ti√™u n√†o. H√£y t·∫°o ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p>
            </div>
        </section>

        <section id="view-calendar" class="view-section">
		
            <div style="max-width: 800px; margin: 0 auto;">
        <div style="text-align: center; margin-bottom: 30px;">
            <h2 style="font-size: 24px; margin-bottom: 10px;"><i class="fas fa-graduation-cap"></i> Ch∆∞∆°ng Tr√¨nh Tu T·∫≠p</h2>
            <p style="color: var(--text-light);">C√°c kho√° ch·ª©ng ch·ªâ thi·ªÅn ƒë·ªãnh s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu ƒë·∫øn h√†nh gi·∫£ thu·∫ßn th·ª•c.</p>
        </div>

        <div id="roadmap-container"></div>
    </div>
			
        </section>

        <section id="view-reports" class="view-section">
    <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 25px;">
        <button class="btn" id="btn-rep-time" onclick="app.setReportMode('time')">
            <i class="fas fa-clock"></i> Th·ªùi gian
        </button>
        <button class="btn btn-secondary" id="btn-rep-mind" onclick="app.setReportMode('mindfulness')">
            <i class="fas fa-spa"></i> Ch√°nh ni·ªám
        </button>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: 1fr;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h4 id="breakdown-title" style="margin: 0;">Th·ªùi gian</h4>
        
        <select id="report-range-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderReports(true)">
            <option value="all">To√†n b·ªô</option>
            <option value="today">H√¥m nay</option>
			<option value="yesterday">H√¥m qua</option>
            <option value="this_week" selected>Tu·∫ßn n√†y</option>
            <option value="last_week">Tu·∫ßn tr∆∞·ªõc</option>
            <option value="this_month">Th√°ng n√†y</option>
            <option value="last_month">Th√°ng tr∆∞·ªõc</option>
        </select>
    </div>
    
    <div style="height: 300px; display:flex; justify-content:center;">
        <canvas id="goalBreakdownChart"></canvas>
    </div>
</div>
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportWeek(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="weekly-report-title">Ti√™u ƒëi·ªÉm tu·∫ßn</h4>
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportWeek(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div style="height: 300px;">
                    <canvas id="weeklyChart"></canvas>
                </div>
            </div>
            </div>
            
            <div class="card" style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                <h4 id="monthly-report-title">Ti√™u ƒëi·ªÉm th√°ng</h4>
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div style="height: 300px;">
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>
    </div>
	
	<div class="card" style="margin-top: 20px;">
                <h3 style="text-align: center;">L·ªãch Tu T·∫≠p</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0;">
                    <button class="btn btn-secondary" onclick="app.changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="cal-month-year">Th√°ng NƒÉm</h4>
                    <button class="btn btn-secondary" onclick="app.changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>	
</section>
<section id="view-analytics" class="view-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
        <h2 style="margin: 0;">Ph√¢n t√≠ch Thi·ªÅn t·∫≠p</h2>

        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <select id="ana-goal-select" class="form-control" style="width: auto; max-width: 150px;" onchange="app.renderAnalytics(true)">
                </select>

            <select id="ana-time-range" class="form-control" style="width: auto;" onchange="app.renderAnalytics()">
                <option value="3" selected>3 ng√†y qua</option>
                <option value="7">7 ng√†y qua</option>
				<option value="14">14 ng√†y qua</option>
                <option value="30">30 ng√†y qua</option>
                <option value="90">3 th√°ng qua</option>
                <option value="365">To√†n b·ªô</option>
            </select>
        </div>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
        <div class="card" style="text-align: center; border-left: 4px solid var(--success);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">Ch·∫•t l∆∞·ª£ng trung b√¨nh</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-avg-quality">0%</div>
            <div style="font-size: 11px; color: var(--text-light);">T·ª∑ l·ªá t·ªânh th·ª©c/th·ªùi gian</div>
        </div>
        <div class="card" style="text-align: center; border-left: 4px solid var(--primary);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">T·ªâ l·ªá Ch√°nh ni·ªám</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-avg-density">0</div>
            <div style="font-size: 11px; color: var(--text-light);">Ch√°nh ni·ªám / ph√∫t</div>
        </div>
        <div class="card" style="text-align: center; border-left: 4px solid var(--danger);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">T·ªïng ch√°nh ni·ªám</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-total-mindful">0h</div>
            <div style="font-size: 11px; color: var(--text-light);">Th·ªùi gian t·ªânh th·ª©c</div>
        </div>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: 1fr; gap: 20px;">
        <div class="card">
            <h3><i class="fas fa-chart-line"></i> Chi·ªÅu h∆∞·ªõng T·ªânh th·ª©c</h3>
            <p style="font-size: 12px; color: var(--text-light); margin-bottom: 15px;">So s√°nh ch·∫•t l∆∞·ª£ng ch√°nh ni·ªám c√°c th·ªùi thi·ªÅn</p>
            <div style="height: 300px;">
                <canvas id="analyticsTrendChart"></canvas>
            </div>
        </div>
<div class="card" style="margin-top: 20px;">
    <h3><i class="fas fa-chart-column"></i> Ch√°nh ni·ªám trong ng√†y</h3>
    <p style="font-size: 12px; color: var(--text-light); margin-bottom: 15px;">
        Ch·∫•t l∆∞·ª£ng & t·ªïng th·ªùi l∆∞·ª£ng tu t·∫≠p h·∫±ng ng√†y
    </p>
    <div style="height: 250px;">
        <canvas id="analyticsHourlyChart"></canvas>
    </div>
</div>

<div class="card" style="margin-top: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(-1)">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div>
            <h4 style="margin: 0; display:inline-block;">Ch√°nh ni·ªám - T·ªânh gi√°c</h4>
            <p id="density-month-title" style="font-size: 12px; color: var(--text-light); margin: 0; text-align: center; margin-top:2px;">
                Th√°ng n√†y
            </p>
        </div>
        <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(1)">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

  
    <div style="height: 250px;">
        <canvas id="reportDensityChart"></canvas>
    </div>
	
</div>
        <div class="card">
            <h3><i class="fas fa-chart-mixed"></i> So s√°nh K·∫øt qu·∫£</h3>
            <div style="margin-top: 15px;">
                <table style="width: 100%; border-collapse: collapse; font-size: 13px; table-layout: fixed;">
                    <thead>
                        <tr style="border-bottom: 2px solid var(--border); color: var(--text-light);">
                            <th style="text-align: left; padding: 10px;">Th·ªùi gian</th>
                            <th style="text-align: center; padding: 10px;">Th·ªùi thi·ªÅn</th>
                            <th style="text-align: center; padding: 10px;">T·ªïng gi·ªù</th>
                            <th style="text-align: center; padding: 10px;">Ch·∫•t l∆∞·ª£ng</th>
                            <th style="text-align: center; padding: 10px;">Ch√°nh ni·ªám&#8203;/&#8203;ph√∫t</th>
                        </tr>
                    </thead>
                    <tbody id="ana-comparison-table">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
       <section id="view-pro" class="view-section">
    <div class="dashboard-grid" style="grid-template-columns: 1fr;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="margin: 0;"><i class="fab fa-gripfire"></i> M·ª©c ch√∫ t√¢m</h4>
                    <select id="pro-range-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderProAnalytics(true)">
                        <option value="all">To√†n b·ªô</option>
                        <option value="today">H√¥m nay</option>
						<option value="yesterday">H√¥m qua</option>
                        <option value="this_week" selected>Tu·∫ßn n√†y</option>
                        <option value="last_week">Tu·∫ßn tr∆∞·ªõc</option>
                        <option value="this_month">Th√°ng n√†y</option>
                        <option value="last_month">Th√°ng tr∆∞·ªõc</option>
                    </select>
                </div>
                <div style="height: 300px; display:flex; justify-content:center;">
                    <canvas id="proBreakdownChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProWeek(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="pro-weekly-title">Tu·∫ßn n√†y</h4>
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProWeek(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div style="height: 300px;">
                    <canvas id="proWeeklyChart"></canvas>
                </div>
            </div>
        </div>
<div class="card" style="margin-top: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h4 style="margin: 0;"><i class="fas fa-chart-area"></i> Xu h∆∞·ªõng Ch√∫ t√¢m</h4>
        <select id="pro-trend-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderProTrendChart()">
            <option value="3" selected>3 ng√†y qua</option>
			<option value="7">7 ng√†y qua</option>
            <option value="14">14 ng√†y qua</option>
            <option value="30">30 ng√†y qua</option>
			<option value="90">3 th√°ng qua</option>
            <option value="all">To√†n b·ªô</option>
        </select>
    </div>
    <p style="font-size: 11px; color: var(--text-light); margin-bottom: 15px;">
        M·ª©c ch√∫ t√¢m trung b√¨nh qua c√°c th·ªùi thi·ªÅn
    </p>
    <div style="height: 300px;">
        <canvas id="proTrendChart"></canvas>
    </div>
</div>
        <div class="card" style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                <h4 id="pro-monthly-title">Th√°ng n√†y</h4>
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProMonth(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div style="height: 300px;">
                <canvas id="proMonthlyChart"></canvas>
            </div>
        </div>
		
		
    </div>
</section>

<section id="view-achievements" class="view-section">
<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; align-items: stretch; width: 100%; padding: 10px 0;">
    
    <div id="parami-altar" onclick="app.openBadgePicker()" class="card" 
         style="flex: 1; min-width: 320px; cursor: pointer; text-align: center; position: relative; overflow: hidden; min-height: 250px; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: all 0.5s ease;">
        
        <div class="altar-bg-glow"></div>
        
        <div style="font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--text-light); margin-bottom: 15px; z-index: 2;">
            PƒÅramƒ´ H√†nh Tr√¨
        </div>

        <div id="altar-icon" style="font-size: 60px; margin-bottom: 15px; z-index: 2; filter: drop-shadow(0 0 15px rgba(0,0,0,0.5)); transition: transform 0.3s ease;" 
             onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
            <i class="fas fa-wreath-laurel" style="color: var(--text-light);"></i>
        </div>

        <div id="altar-title" style="font-size: 24px; font-weight: bold; margin-bottom: 5px; z-index: 2; color: var(--text);">
            Ch·ªçn PƒÅramƒ´
        </div>
    </div>

    <div class="card" 
         onclick="app.renderRandomQuote()" 
         title="Ch·∫°m ƒë·ªÉ ƒë·ªïi c√¢u kh√°c"
         style="flex: 1; min-width: 320px; text-align: center; border-left: 5px solid var(--zen); cursor: pointer; transition: transform 0.2s; user-select: none; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px;">
        
        <h3 style="color: var(--zen); margin-bottom: 15px;">
            <i class="far fa-dharmachakra"></i> Kinh Ph√°p C√∫
        </h3>
        
        <div id="dhammapada-display" style="font-style: italic; font-size: 16px; line-height: 1.6; color: var(--text); min-height: 80px; display: flex; align-items: center; justify-content: center; transition: opacity 0.3s ease;">
            </div>

        <div id="dhammapada-source" style="font-size: 11px; color: var(--text-light); margin-top: 15px; opacity: 0.7;">
        </div>
    </div>
</div>
    <div class="card" style="margin-top: 20px;">
        <h3 style="text-align: center;"><i class="fas fa-wreath-laurel"></i> PƒÅramƒ´ </h3>
        <div id="achievement-list" style="margin-top: 20px; display: grid; gap: 10px;"></div>
    </div>
</section>
    </main>

    <div class="modal" id="choice-modal">
        <div class="modal-content">
            <h2 style="text-align:center;">Ch·ªçn lo·∫°i m·ª•c ti√™u</h2>
            <div class="choice-btn-container">
                <div class="choice-card" onclick="app.openModal(null, 'meditation')">
                    <i class="fas fa-spa" style="color: var(--zen);"></i>
                    <h3>Thi·ªÅn ƒê·ªãnh</h3>
                    <p style="font-size:12px; color:var(--text-light); margin-top:5px;">Theo d√µi ch√°nh ni·ªám</p>
                </div>
                <div class="choice-card" onclick="app.openModal(null, 'standard')">
                    <i class="fas fa-tasks" style="color: var(--primary);"></i>
                    <h3>C√¥ng Vi·ªác</h3>
                    <p style="font-size:12px; color:var(--text-light); margin-top:5px;">Theo d√µi ti·∫øn ƒë·ªô</p>
                </div>
            </div>
            <button class="btn btn-secondary" style="width:100%; margin-top:20px;" onclick="app.closeChoiceModal()">H·ªßy</button>
        </div>
    </div>

    <div class="modal" id="goal-modal">
        <div class="modal-content">
            <h2 id="modal-title" style="margin-bottom: 20px;">T·∫°o m·ª•c ti√™u m·ªõi</h2>
            <form onsubmit="app.saveGoal(event)">
                <input type="hidden" id="g-id"> 
                <input type="hidden" id="g-type"> 
                
                <div class="form-group">
                    <label>T√™n m·ª•c ti√™u</label>
                    <input type="text" id="g-name" class="form-control" required>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>Danh m·ª•c</label>
                        <select id="g-cat" class="form-control">
                            </select>
                    </div>
                    <div class="form-group">
                        <label>M√†u s·∫Øc</label>
                        <input type="color" id="g-color" class="form-control" value="#6366f1">
                    </div>
                </div>
                
                <div class="form-group" style="background: rgba(16, 185, 129, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <label style="color: var(--success);">M·ª•c ti√™u h·∫±ng ng√†y</label>
                    <input type="number" id="g-daily-target" class="form-control" min="0" value="30">
                    <small id="g-daily-hint" style="color: var(--success); font-size: 11px;">Ph√∫t m·ªói ng√†y</small>
                </div>
                
                <div class="form-group">
                    <label>Th√†nh t·ª±u trong</label>
                    <input type="number" id="g-lifetime-target" class="form-control" required min="1" value="1000">
                    <small id="g-life-hint" style="color: var(--text-light); font-size: 11px;">T·ªïng s·ªë ph√∫t</small>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="app.closeModal()">H·ªßy</button>
                    <button type="submit" class="btn" id="btn-save-goal">T·∫°o m·ª•c ti√™u</button>
                </div>
            </form>
        </div>
    </div>
<div class="modal" id="backup-modal">
    <div class="modal-content">
        <h2 style="margin-bottom: 10px; text-align: center;">Sao l∆∞u & Kh√¥i ph·ª•c</h2>
        
        <div class="desktop-actions" style="margin-bottom: 20px;">
            <p style="color: var(--text-light); text-align: center; font-size: 12px; margin-bottom: 10px;">
                <i class="fas fa-box-archive"></i> <strong>Sao l∆∞u & kh√¥i ph·ª•c d·ªØ li·ªáu:</strong>
            </p>
            <div style="display: flex;  justify-content: center; gap: 10px;">
                <button class="btn" style="flex: 1;" onclick="app.downloadFile()">
                    <i class="fas fa-download"></i> Sao&nbsp;l∆∞u
                </button>
                <button class="btn btn-secondary"; style="flex: 1;" " onclick="document.getElementById('backup-file-input').click()">
                    <i class="fas fa-file-import"></i> Kh√¥i&nbsp;ph·ª•c
                </button>
                <input type="file" id="backup-file-input" style="display: none;" accept=".json, .txt" onchange="app.handleFileUpload(this)">
            </div>
        </div>
<div style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
    
    <button class="btn btn-secondary" style="flex: 1;" onclick="app.shareBackup()">
        <i class="fas fa-share-alt"></i> Chia&nbsp;s·∫ª
    </button>

    <button class="btn btn-secondary" style="flex: 1; border-color: var(--danger); color: var(--danger);" onclick="app.closeBackupModal()">
        ƒê√≥ng
    </button>
</div>
</div></div>
    <div class="modal" id="session-modal" >
    <div class="modal-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 id="session-title" style="margin: 0;">Ghi nh·∫≠n phi√™n</h2>
            <button type="button" id="btn-delete-session" class="btn-icon" 
                style="background: transparent; color: var(--danger); display: none; width: 30px; height: 30px;" 
                onclick="app.deleteSession()"
                title="X√≥a phi√™n n√†y">
                <i class="fas fa-trash"></i>
            </button>
        </div>
            <form onsubmit="app.logSessionConfirm(event)">
                <input type="hidden" id="s-goal-id" />
                <input type="hidden" id="s-log-id" />
                
                <div class="form-group">
                    <label>Ng√†y & Gi·ªù b·∫Øt ƒë·∫ßu</label>
                    <input type="datetime-local" id="s-date" class="form-control" required />
                </div>
                
                <div class="form-group">
                    <label>Th·ªùi l∆∞·ª£ng (Ph√∫t)</label>
                    <input type="number" id="s-minutes" class="form-control" required min="1" />
                </div>
                <div class="form-group" id="s-mindfulness-group" style="display:none; background: rgba(167, 139, 250, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(167, 139, 250, 0.3);">
    <label style="color: var(--zen);">S·ªë l·∫ßn ch√°nh ni·ªám</label>
    <input type="number" id="s-mindfulness" class="form-control" min="0" value="0" />
    
    <div style="margin-top: 10px; border-top: 1px solid rgba(167, 139, 250, 0.3); padding-top: 10px;">
        <label style="color: var(--zen); font-size: 12px;">Ng∆∞·ª°ng m·∫•t t·∫≠p trung (gi√¢y)</label>
        <input type="number" id="s-threshold" class="form-control" min="1" value="12" style="background: rgba(0,0,0,0.2);" />
    </div>
</div>
               <div class="form-group">
    <label>Ghi ch√∫ (T√πy ch·ªçn)</label>
    <textarea id="s-notes" class="form-control" placeholder="B·∫°n ƒë√£ t·∫≠p trung v√†o ƒëi·ªÅu g√¨?"></textarea>
    <div id="session-tags" class="tag-container"></div>
</div>

                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="app.closeSessionModal()">H·ªßy</button>
                    <button type="submit" class="btn">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

 <div id="meditation-overlay">
    <div class="med-timer-disp" id="med-timer">00:00</div>
    <div class="med-controls">
    <button class="btn btn-secondary" onclick="app.openMedSettings()" title="C√†i ƒë·∫∑t ch·∫°m">
        <i class="fas fa-cog"></i>
    </button>
 
    <button class="btn" style="background-color: var(--danger); color: white;" onclick="app.concludeMeditationSession()"><i class="fas fa-stop"></i></button>
</div>
	
	<div id="med-quote-container" class="med-quote-box">
    <div id="med-quote-text" style="font-style: italic; font-size: 14px; margin-bottom: 8px; line-height: 1.4; text-shadow: 0 2px 4px rgba(0,0,0,0.8);"></div>
</div>
    <div class="meditation-circle" id="med-counter">0</div>
    
    <div class="med-instruction" style="text-align: center;">Ch·∫°m m√†n h√¨nh ƒë·ªÉ ghi&nbsp;nh·∫≠n&nbsp;ch√°nh&nbsp;ni·ªám</div>
</div>

    <div class="modal" id="meditation-finish-modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 10px;">Th·ªùi thi·ªÅn ho√†n t·∫•t</h2>
            <div style="text-align:center; margin: 20px 0; display:flex; justify-content:space-around; align-items:center;">
                <div>
                    <div style="font-size: 30px; font-weight:bold; color:var(--zen)" id="med-finish-count">0</div>
                    <div style="color:var(--text-light); font-size:12px;">Ch√°nh ni·ªám</div>
                </div>
                <div style="height:40px; width:1px; background:var(--border);"></div>
                <div>
                    <div style="font-size: 30px; font-weight:bold; color:var(--text)" id="med-finish-time">0m</div>
                    <div style="color:var(--text-light); font-size:12px;">Th·ªùi gian</div>
                </div>
            </div>
			<div class="form-group" style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; margin: 15px 0;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                <label style="margin:0; font-size: 13px;"><i class="fas fa-percentage"></i> Hi·ªáu su·∫•t th·ª±c t·∫ø</label>
                <span id="med-efficiency-disp" style="font-weight:bold; color:var(--zen); font-size: 14px;">100%</span>
            </div>
            <input type="range" id="med-efficiency-slider" class="form-control" 
                   min="10" max="100" step="5" value="100" 
                   style="margin: 10px 0;"
                   oninput="app.updateEfficiencyDisplay()">
            <div style="font-size: 11px; color: var(--text-light); font-style: italic;">
                K√©o ƒë·ªÉ ƒëi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng ch√°nh ni·ªám th·ª±c t·∫ø
            </div>
        </div>
            <div class="form-group">
    <label>Nh·∫≠t k√Ω</label>
    <textarea id="med-finish-notes" class="form-control" placeholder="Ch√°nh ni·ªám c·ªßa b·∫°n c√≥ t·ªët kh√¥ng?"></textarea>
    <div id="finish-tags" class="tag-container"></div>
</div>
            <div id="med-finish-actions" style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
             <button id="btn-med-discard" class="btn btn-secondary" onclick="app.discardMeditation()">Tho√°t</button>
             <button id="btn-med-save" class="btn" style="background:var(--zen); color:white" onclick="app.saveMeditationLog()">L∆∞u nh·∫≠t k√Ω</button>
        </div>
    </div>
</div>

<div class="modal" id="quiz-modal" style="z-index: 5000;">
    <div class="modal-content">
        <h2 style="text-align: center; margin-bottom: 20px;"><i class="fas fa-question-circle"></i> Tr·∫Øc Nghi·ªám</h2>
        <p style="color: var(--text-light); font-size: 13px; text-align: center; margin-bottom: 20px;">
            Tr·∫£ l·ªùi ƒë√∫ng t·∫•t c·∫£ c√¢u h·ªèi ƒë·ªÉ ho√†n th√†nh b√†i h·ªçc.
        </p>
        
        <div id="quiz-container">
            </div>

        <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px; border-top: 1px solid var(--border); padding-top: 15px;">
            <button class="btn btn-secondary" onclick="document.getElementById('quiz-modal').style.display='none'">ƒê√≥ng</button>
            <button class="btn" onclick="app.submitQuiz()">Ki·ªÉm tra k·∫øt qu·∫£</button>
        </div>
    </div>
</div>
    <div class="modal" id="graph-modal" style="overflow-y: auto; z-index: 150;">
        <div class="modal-content" style="width: 600px;">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom: 20px;">
                <div>
                    <h2 style="margin-bottom: 5px;">Th·ªùi thi·ªÅn</h2>
                    <p id="graph-date" style="color: var(--text-light); font-size: 14px; margin: 0;"></p>
                </div>
               
            </div>

            <div style="height: 300px; width: 100%;">
                <canvas id="sessionGraph"></canvas>
            </div>
            
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
			<button class="btn btn-secondary" id="btn-export-session" title="Sao ch√©p d·ªØ li·ªáu JSON">
                    <i class="fas fa-file-code"></i>
                </button>
			<select id="graph-type-select" class="form-control" style="width: auto; padding: 5px; height: 36px; font-size: 13px; cursor: pointer;" onchange="app.updateSessionChart()">
    <option value="interval">‚òÅÔ∏è Th·∫•t ni·ªám</option>
    <option value="intensity">üå± Ch√°nh ni·ªám</option>
    <option value="pro">üî• M·ª©c ch√∫ t√¢m</option> </select>
                
                <button class="btn btn-secondary" onclick="document.getElementById('graph-modal').style.display='none'" title="ƒê√≥ng"><i class="fas fa-xmark"></i></button>
				 
            </div>
        </div>
    </div>

    <div class="modal" id="day-details-modal" style="overflow-y: auto;">
    <div class="modal-content">
        <h2 id="day-modal-title" style="margin-bottom: 10px; font-size: 20px;">Chi ti·∫øt ng√†y</h2>
        
        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
            <button class="btn" id="btn-modal-time" style="padding: 5px 15px; font-size: 12px;" onclick="app.switchDayChart('time')">
                <i class="fas fa-clock"></i> Th·ªùi gian
            </button>
            <button class="btn btn-secondary" id="btn-modal-mind" style="padding: 5px 15px; font-size: 12px;" onclick="app.switchDayChart('mindfulness')">
                <i class="fas fa-spa"></i> Ch√°nh ni·ªám
            </button>
        </div>

        <div style="height: 200px; position: relative; margin-bottom: 20px;">
            <canvas id="dayBreakdownChart"></canvas>
        </div>

        <h3 style="font-size: 14px; color: var(--text-light); border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-bottom: 10px;">Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</h3>
        <div id="day-session-list" style="max-height: 150px; overflow-y: auto;"></div>
        
        <div style="display: flex; justify-content: flex-end; margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px;">
            <button class="btn btn-secondary" onclick="app.closeDayModal()">ƒê√≥ng</button>
        </div>
    </div>
</div>

    <div id="toast" class="toast">
        <i class="fas fa-info-circle"></i> <span id="toast-msg">Th√¥ng b√°o</span>
    </div>
	<div class="modal" id="med-settings-modal" style="z-index: 2000;">
    <div class="modal-content" style="max-width: 350px;">
       <h3 style="margin-bottom: 10px; text-align: center;">
            C·∫•u h√¨nh T∆∞∆°ng t√°c 
            <i class="fas fa-info-circle" 
               style="cursor: help; color: var(--primary); margin-left: 5px;" 
               onclick="app.showInteractionInfo()" 
               title="Nh·∫•n ƒë·ªÉ xem ƒë·ªãnh nghƒ©a"></i>
        </h3>
        
        <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; margin-bottom: 10px; font-size: 13px; color: var(--text-light); margin-left:20px; text-align: left;">
            <i class="fas fa-fingerprint"></i> <strong>Ch·∫°m</strong> ƒë·ªÉ ghi nh·∫≠n ch√°nh ni·ªám,<br>
			<i class="fas fa-hand-pointer"></i> <strong>·∫§n gi·ªØ</strong> ƒë·ªÉ ghi nh·∫≠n t·ªânh gi√°c.
        </div>

        <div class="form-group">
            <label>Th·ªùi gian ·∫•n gi·ªØ: <span id="disp-hold-time" style="color:var(--primary)">0.5s</span></label>
            <input type="range" id="inp-hold-time" class="form-control" min="400" max="1000" step="100" oninput="app.updateMedSettingDisplay()">
        </div>
<div id="setting-pro-legend" style="background: rgba(167, 139, 250, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(167, 139, 250, 0.3); margin-bottom: 15px;">
    <div style="font-size: 11px; margin-bottom: 5px; color: var(--text-light)">üî• M·ª©c ch√∫ t√¢m:</div>
    <div style="font-size: 12px; display:flex; gap:10px;text-align: center;"> <div class="text-q4">1 Ch·∫°m: <strong>Th·∫•p;</strong></div> <div class="text-q3">2 Ch·∫°m: <strong>TB;</strong></div> <div class="text-q2">3 Ch·∫°m: <strong>T·ªët.</strong></div> </div>
	<div style="font-size: 11px; text-align: center; margin-top: 5px">
        <div><span style="color: var(--text-light)">15 l·∫ßn ghi nh·∫≠n li√™n t·ª•c ‚â§ <i>Ng∆∞·ª°ng m·∫•t t·∫≠p trung:</i></span><br> <span class="text-q4"><strong>Th·∫•p</strong></span> ‚Üí <span class="text-q3"><strong>TB</strong></span> ‚Üí <span class="text-q2"><strong>T·ªët</strong></span> ‚Üí <span class="text-q1"><strong>Cao</strong></span></div>
    </div>
</div>


        <div class="form-group" style="background: rgba(251, 191, 36, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3); margin-top: 15px;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <label style="margin:0; color: var(--warning);"><i class="fas fa-check-double"></i> Ch·∫ø ƒë·ªô X√°c nh·∫≠n</label>
                <input type="checkbox" id="inp-confirm-mode" style="width: 20px; height: 20px; accent-color: var(--warning);" onchange="app.toggleConfirmSlider()">
            </div>
            
            <div id="confirm-slider-group" style="margin-top: 10px; display:none; border-top: 1px solid rgba(251, 191, 36, 0.3); padding-top: 10px;">
                <label style="font-size:12px; color: var(--text-light);">T·∫ßn su·∫•t xu·∫•t hi·ªán: <span id="disp-confirm-prob" style="color:var(--warning); font-weight:bold;">100%</span></label>
                <input type="range" id="inp-confirm-prob" class="form-control" min="10" max="100" step="10" oninput="app.updateConfirmProbDisplay()">
                <div style="font-size: 11px; color: var(--text-light); margin-top: 5px; font-style: italic; line-height: 1.4;">
                    Ch·∫°m l·∫ßn 1 ƒë·ªÉ "ch·ªù", ch·∫°m l·∫ßn 2 ƒë·ªÉ "x√°c nh·∫≠n".<br>
                    (Ch·ªâ √°p d·ª•ng cho m·ª©c ch√∫ t√¢m <strong>Th·∫•p</strong>).
                </div>
            </div>
        </div>

        <div class="form-group" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
            <label style="margin:0"><i class="fas fa-mobile-alt"></i> Rung ph·∫£n h·ªìi</label>
            <input type="checkbox" id="inp-vibrate" style="width: 20px; height: 20px;" onchange="app.saveMedSettings()">
        </div>

        <div style="margin-top: 25px;">
            <button class="btn" style="width: 100%;" onclick="app.closeMedSettings()">ƒê√≥ng & √Åp d·ª•ng</button>
        </div>
    </div>
</div>
	
<div class="modal" id="intro-modal" style="z-index: 9999;">
    <div class="modal-content" style="max-width: 800px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; padding: 0;">
        
        <div style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: var(--surface); border-radius: 16px 16px 0 0;">
            <h2 style="margin: 0;">‚ú® Nh·∫≠t K√Ω H√†nh Gi·∫£</h2>
            <button class="btn-icon" onclick="app.closeIntroModal()" style="color: var(--text-light); background: transparent;"><i class="fas fa-times"></i></button>
        </div>

        <div style="padding: 20px; overflow-y: auto; line-height: 1.6; color: var(--text-light);">
            
            <p><strong>Nh·∫≠t K√Ω H√†nh Gi·∫£</strong> l√† ·ª©ng d·ª•ng h·ªó tr·ª£ tu t·∫≠p v√† l√†m vi·ªác. ·ª®ng d·ª•ng gi√∫p h√†nh gi·∫£ theo d√µi ti·∫øn tr√¨nh trong c√¥ng vi·ªác c≈©ng nh∆∞ trong h√†nh thi·ªÅn, ghi nh·∫≠n m·ª©c ƒë·ªô t·ªânh gi√°c th√¥ng qua s·ªë l·∫ßn "Ch√°nh Ni·ªám", v√† tr·ª±c quan h√≥a tr·∫°ng th√°i t√¢m tr√≠ qua bi·ªÉu ƒë·ªì & ƒë·ªì th·ªã theo th·ªùi gian th·ª±c.</p>
            
            <img src="./images/1vi.png" alt="Dashboard Preview" style="width: 100%; border-radius: 8px; border: 1px solid var(--border); margin: 10px 0;">

            <h3 style="color: var(--text); margin-top: 20px;">‚ú® C√°c Kh√°i Ni·ªám C·ªët L√µi</h3>
            <p>ƒê·ªÉ s·ª≠ d·ª•ng ·ª©ng d·ª•ng hi·ªáu qu·∫£, b·∫°n c·∫ßn n·∫Øm r√µ c√°c ch·ªâ s·ªë sau:</p>
            <ul style="padding-left: 20px; margin-bottom: 15px;">
                <li><strong>Ch√°nh Ni·ªám</strong> l√† ƒë∆°n v·ªã ƒëo l∆∞·ªùng s·ª± t·ªânh th·ª©c. M·ªói l·∫ßn b·∫°n nh·∫≠n bi·∫øt ƒë∆∞·ª£c h∆°i th·ªü ho·∫∑c tr·∫°ng th√°i t√¢m tr√≠ v√† ch·∫°m v√†o m√†n h√¨nh, m·ªôt "Ch√°nh Ni·ªám" s·∫Ω ƒë∆∞·ª£c ghi l·∫°i.</li>
                <li><strong>Ch√°nh ni·ªám t·ªët:</strong> Tr·∫°ng th√°i khi t·∫ßn su·∫•t ghi nh·∫≠n (Ni·ªám) duy tr√¨ ·ªü m·ª©c ·ªïn ƒë·ªãnh v√† ƒë·ªÅu ƒë·∫∑n.</li>
                <li><strong>Th·∫•t ni·ªám:</strong> Tr·∫°ng th√°i khi t√¢m tr√≠ b·ªã xao nh√£ng ho·∫∑c bu·ªìn ng·ªß, d·∫´n ƒë·∫øn vi·ªác kh√¥ng c√≥ ho·∫∑c c√≥ r·∫•t √≠t ghi nh·∫≠n trong m·ªôt kho·∫£ng th·ªùi gian.</li>
                <li><strong>Chu·ªói Tinh T·∫•n:</strong> S·ªë ng√†y li√™n ti·∫øp b·∫°n th·ª±c hi·ªán tu t·∫≠p.</li>
            </ul>

            <h3 style="color: var(--text); margin-top: 20px;">‚ú® T√≠nh NƒÉng N·ªïi B·∫≠t</h3>
            
            <h4 style="color: var(--primary);">1. Qu·∫£n L√Ω M·ª•c Ti√™u ƒêa D·∫°ng</h4>
            <ul style="padding-left: 20px;">
                <li><strong>Hai lo·∫°i m·ª•c ti√™u ch√≠nh:</strong>
                    <ul>
                        <li><strong>‡•ê Thi·ªÅn ƒê·ªãnh:</strong> Theo d√µi th·ªùi gian ng·ªìi thi·ªÅn v√† ƒë·∫øm s·ªë l·∫ßn ghi nh·∫≠n ch√°nh ni·ªám.</li>
                        <li><strong>‚ö° C√¥ng Vi·ªác:</strong> ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c truy·ªÅn th·ªëng d√πng cho c√¥ng vi·ªác, h·ªçc t·∫≠p (Pomodoro) ho·∫∑c c√°c th√≥i quen kh√°c.</li>
                    </ul>
                </li>
                <li><strong>T√πy bi·∫øn:</strong> T·ª± ƒë·∫∑t m·ª•c ti√™u h·∫±ng ng√†y (s·ªë ph√∫t), th·ªùi gian c·∫ßn d√†nh ƒë·ªÉ ho√†n th√†nh m·ª•c ti√™u, m√†u s·∫Øc ƒë·∫°i di·ªán v√† danh m·ª•c qu·∫£n l√Ω.</li>
            </ul>

            <h4 style="color: var(--primary); margin-top: 15px;">2. C·∫•u h√¨nh T∆∞∆°ng T√°c</h4>
<p>Trong giao di·ªán thi·ªÅn, nh·∫•n n√∫t <i class="fas fa-cog"></i> ƒë·ªÉ m·ªü c√†i ƒë·∫∑t t∆∞∆°ng t√°c. ·ª®ng d·ª•ng h·ªó tr·ª£ rung ph·∫£n h·ªìi x√∫c gi√°c & gi√∫p b·∫°n ghi nh·∫≠n ƒë·ªìng th·ªùi 2 tr·∫°ng th√°i t√¢m c√πng 4 thang ƒëi·ªÉm cho m·ª©c ƒë·ªô ch√∫ t√¢m. </p>

<div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; border: 1px solid var(--border);">
    <ul style="padding-left: 20px; margin: 0;">
        <li style="margin-bottom: 12px;">
            <i class="fas fa-fingerprint" style="color: var(--zen); width: 20px;"></i> <strong>Ch·∫°m = Ch√°nh Ni·ªám (gi·ªØ t√¢m tr√™n ƒë·ªÅ m·ª•c):</strong> 
            <br>Ch·∫°m nh·∫π m√†n h√¨nh ƒë·ªÉ ghi nh·∫≠n s·ª± ch√∫ t√¢m v√†o ƒë·ªÅ m·ª•c thi·ªÅn, v√≠ d·ª•: 1 l·∫ßn ch·∫°m cho 1 h∆°i th·ªü v√†o ra t√≠nh l√† 1 ch√°nh ni·ªám.
            <div style="font-size: 13px; color: var(--text-light); margin-top: 4px;">
                <em>*<strong>C∆° ch·∫ø Chu·ªói (Combo):</strong></em> M·ªçi phi√™n ƒë·ªÅu b·∫Øt ƒë·∫ßu ·ªü m·ª©c ch√∫ t√¢m <b>Th·∫•p</b>. C·ª© m·ªói 15 l·∫ßn ghi nh·∫≠n li√™n t·ª•c v·ªõi kho·∫£ng c√°ch th·ªùi gian ‚â§ <i>Ng∆∞·ª°ng m·∫•t t·∫≠p trung</i>, m·ª©c ch√∫ t√¢m s·∫Ω ƒë∆∞·ª£c n√¢ng l√™n m·ªôt b·∫≠c (<span class="text-q4"><strong>Th·∫•p</strong></span> ‚Üí <span class="text-q3"><strong>TB</strong></span> ‚Üí <span class="text-q2"><strong>T·ªët</strong></span> ‚Üí <span class="text-q1"><strong>Cao</strong></span>). N·∫øu ƒë·ªÉ qu√° ng∆∞·ª°ng, chu·ªói s·∫Ω reset v·ªÅ m·ª©c Th·∫•p.
            <br>
			 <em>*<strong>Ch·∫ø ƒë·ªô Th·ªß c√¥ng:</strong></em> Cho ph√©p b·∫°n <strong>ch·ªß ƒë·ªông ph√¢n lo·∫°i</strong> m·ª©c ƒë·ªô ch√∫ t√¢m d·ª±a tr√™n thao t√°c tay c·ªßa b·∫°n:
                        <div style="font-size: 12px; display:flex; gap:10px;text-align: center;"> <div class="text-q4">1 Ch·∫°m: <strong>Th·∫•p;</strong></div> <div class="text-q3">2 Ch·∫°m: <strong>TB;</strong></div> <div class="text-q2">3 Ch·∫°m: <strong>T·ªët.</strong></div> </div>
                    
        </div>
        
        <li style="margin-bottom: 12px;">
            <i class="fas fa-hand-pointer" style="color: #818cf8; width: 20px;"></i> <strong>·∫§n gi·ªØ = T·ªânh Gi√°c (nh·∫≠n bi·∫øt tr·∫°ng th√°i t√¢m, ph√°t hi·ªán xao nh√£ng):</strong> 
            <br>·∫§n v√† gi·ªØ m√†n h√¨nh ƒë·ªÉ ghi nh·∫≠n T·ªânh Gi√°c. T·ªânh gi√°c l√† khi b·∫°n <b>nh·∫≠n bi·∫øt</b> ƒë∆∞·ª£c tr·∫°ng th√°i t√¢m m√¨nh (v√≠ d·ª•: ch·ª£t nh·∫≠n ra m√¨nh ƒëang ph√≥ng t√¢m, ƒëang c√≥ t·∫°p ni·ªám, ho·∫∑c ƒëang m·∫•t t·∫≠p trung tr√™n ƒë·ªÅ m·ª•c thi·ªÅn). ƒê√¢y l√† kho·∫£nh kh·∫Øc c·ªßa s·ª± nh·∫≠n bi·∫øt & quay tr·ªü l·∫°i.
        </li>

        <li style="margin-top: 5px; border-top: 1px solid rgba(251, 191, 36, 0.2); padding-top: 10px;">
            <strong style="color: var(--warning);"><i class="fas fa-check-double"></i> Ch·∫ø ƒë·ªô X√°c nh·∫≠n:</strong> 
            D√†nh cho ng∆∞·ªùi d√πng hay ch·∫°m m√°y v√¥ th·ª©c. Khi b·∫≠t, m·ªôt l·∫ßn ch·∫°m ƒë·∫ßu ti√™n s·∫Ω kh√¥ng ƒë∆∞·ª£c t√≠nh ngay. B·∫°n c·∫ßn ch·∫°m th√™m l·∫ßn th·ª© 2 (trong kho·∫£ng 1-3 gi√¢y) ƒë·ªÉ x√°c nh·∫≠n ƒë√≥ l√† h√†nh ƒë·ªông c√≥ √Ω th·ª©c.
            <ul style="font-size: 12px; margin-top: 5px; color: var(--text-light);">
                <li>Ch·ªâ ghi nh·∫≠n th·ªùi gian c·ªßa l·∫ßn ch·∫°m <strong>ƒë·∫ßu ti√™n</strong>.</li>
                <li>Ch·∫ø ƒë·ªô x√°c nh·∫≠n ch·ªâ √°p d·ª•ng khi m·ª©c ch√∫ t√¢m ƒëang ·ªü m·ª©c <strong>Th·∫•p</strong>.</li>
				<li>L∆∞u √Ω: Ph·∫£n h·ªìi x√∫c gi√°c y√™u c·∫ßu thi·∫øt b·ªã c√≥ h·ªó tr·ª£ ch·∫ø ƒë·ªô rung.</li>

				</ul>
        </li>
    </ul>
</div>
 <div style="text-align: center; margin: 15px 0;">
                <img src="./images/2vi.png" alt="Meditation Mode" style="max-width: 300px; width: 100%; border-radius: 8px; border: 1px solid var(--border);">
            </div>
            <ul style="padding-left: 20px;">
			                <li><strong>Nh·∫≠p li·ªáu th·ªß c√¥ng:</strong> Qu√™n b·∫•m gi·ªù? B·∫°n c√≥ th·ªÉ t·ª± nh·∫≠p l·∫°i phi√™n thi·ªÅn ho·∫∑c s·ª≠a ƒë·ªïi c√°c ghi ch√©p c≈©.</li>

			
            <h4 style="color: var(--primary); margin-top: 15px;">3. B√°o C√°o & Ph√¢n T√≠ch S·ªë Li·ªáu</h4>
            <ul style="padding-left: 20px;">
                <li><strong>B·∫£ng nh·∫≠t k√Ω:</strong> Xem ti·∫øn ƒë·ªô ng√†y h√¥m nay so v·ªõi m·ª•c ti√™u ƒë·ªÅ ra.</li>
                <li><strong>L·ªãch tu t·∫≠p:</strong> Bi·ªÉu ƒë·ªì d·∫°ng l∆∞·ªõi hi·ªÉn th·ªã m·ª©c ƒë·ªô tu t·∫≠p theo ng√†y. M√†u c√†ng nhi·ªÅu th·ªÉ hi·ªán th·ªùi gian tu t·∫≠p c√†ng nhi·ªÅu.</li>
                <li><strong>Bi·ªÉu ƒë·ªì tr·ª±c quan:</strong>
                    <ul>
                        <li><strong>Bi·ªÉu ƒë·ªì phi√™n:</strong> Xem l·∫°i m·ª©c ƒë·ªô ch√°nh ni·ªám <em>trong t·ª´ng th·ªùi thi·ªÅn</em> (bi·ªÉu ƒë·ªì ƒë∆∞·ªùng).</li>
                        <li><strong>B√°o c√°o Tu·∫ßn/Th√°ng:</strong> So s√°nh hi·ªáu su·∫•t theo th·ªùi gian th·ª±c.</li>
                        <li><strong>Bi·ªÉu ƒë·ªì M·ª©c ch√∫ t√¢m:</strong> Tab "Kh√°m ph√°" hi·ªÉn th·ªã bi·ªÉu ƒë·ªì ph√¢n b·ªë m·ª©c ƒë·ªô ch√∫ t√¢m (Cao/Th·∫•p) qua c√°c tu·∫ßn.</li>
                    </ul>
                </li>
            </ul>
            
            <h4 style="color: var(--primary); margin-top: 15px;">4. Ph√¢n T√≠ch Thi·ªÅn T·∫≠p</h4>
            <p>Tab <strong>"Ph√¢n t√≠ch"</strong> gi√∫p b·∫°n soi chi·∫øu l·∫°i ch·∫•t l∆∞·ª£ng t√¢m trong c√°c th·ªùi thi·ªÅn v·ªõi ƒë·ªô ch√≠nh x√°c cao h∆°n.</p>
            <ul style="padding-left: 20px;">
                <li><strong>Ph√¢n t√≠ch theo t·ª´ng m·ª•c ti√™u:</strong> B·∫°n c√≥ th·ªÉ ch·ªçn xem s·ªë li·ªáu c·ªßa ri√™ng "Thi·ªÅn T·ªça" hay "Thi·ªÅn H√†nh" ƒë·ªÉ so s√°nh s·ª± ti·∫øn b·ªô c·ªßa t·ª´ng ph∆∞∆°ng ph√°p tu t·∫≠p.</li>
                
                <li style="margin-top: 10px;">
                    <strong> Ng∆∞·ª°ng m·∫•t t·∫≠p trung:</strong>
                    <p style="font-size: 13px; color: var(--text-light); margin-top: 5px;">
                        ƒê√¢y l√† kh√°i ni·ªám quan tr·ªçng nh·∫•t ƒë·ªÉ t√≠nh to√°n "Ch·∫•t l∆∞·ª£ng thi·ªÅn".
                    </p>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 6px; border-left: 3px solid var(--warning); margin: 5px 0;">
                        <em>"Ng∆∞·ª°ng m·∫•t t·∫≠p trung" l√† kho·∫£ng th·ªùi gian t·ªëi ƒëa cho ph√©p gi·ªØa hai l·∫ßn ghi nh·∫≠n; n·∫øu v∆∞·ª£t qu√° th·ªùi gian n√†y, h·ªá th·ªëng s·∫Ω xem l√† b·∫°n ƒëang m·∫•t t·∫≠p trung.</em>
                    </div>
                    <ul style="margin-top: 5px;">
                        <li><strong>C∆° ch·∫ø ho·∫°t ƒë·ªông:</strong> V√≠ d·ª• b·∫°n ƒë·∫∑t ng∆∞·ª°ng l√† <strong>12 gi√¢y</strong>.
                            <ul>
                                <li>N·∫øu b·∫°n ch·∫°m m√†n h√¨nh sau <strong>5 gi√¢y</strong>: To√†n b·ªô th·ªùi gian ƒë√≥ l√† T·ªânh th·ª©c.</li>
                                <li>N·∫øu b·∫°n ch·∫°m sau <strong>20 gi√¢y</strong>: H·ªá th·ªëng hi·ªÉu r·∫±ng b·∫°n ƒë√£ l∆° l√† ho·∫∑c h√¥n tr·∫ßm m·∫•t <strong>8 gi√¢y</strong> (20 - 12 = 8).</li>
                            </ul>
                        </li>
                        <li><strong>T√πy ch·ªânh ri√™ng bi·ªát:</strong> M·ªói lo·∫°i thi·ªÅn c·∫ßn m·ªôt nh·ªãp ƒë·ªô kh√°c nhau. B·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t ng∆∞·ª°ng th·∫•p (v√≠ d·ª• 5s) cho c√°c b√†i t·∫≠p ghi nh·∫≠n nhanh, ho·∫∑c ng∆∞·ª°ng cao (30s) cho c√°c b√†i t·∫≠p ƒë·ªãnh t√¢m s√¢u h∆°n. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông nh·ªõ c√†i ƒë·∫∑t n√†y cho t·ª´ng m·ª•c ti√™u.</li>
                    </ul>
                </li>
            </ul>

            <h4 style="color: var(--primary); margin-top: 15px;">5. Ri√™ng T∆∞ & An To√†n D·ªØ Li·ªáu</h4>
            <ul style="padding-left: 20px;">
                <li><strong>Offline Ho√†n To√†n:</strong> 100% d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ tr·ª±c ti·∫øp tr√™n tr√¨nh duy·ªát v√† thi·∫øt b·ªã c·ªßa b·∫°n. Kh√¥ng c√≥ d·ªØ li·ªáu n√†o ƒë∆∞·ª£c g·ª≠i v·ªÅ m√°y ch·ªß.</li>
                <li><strong>Sao l∆∞u & Kh√¥i ph·ª•c:</strong> D·ªÖ d√†ng xu·∫•t d·ªØ li·ªáu ra file <code>.json</code> ƒë·ªÉ c·∫•t gi·ªØ ho·∫∑c chuy·ªÉn sang thi·∫øt b·ªã kh√°c.</li>
            </ul>

            <hr style="border: 0; border-top: 1px solid var(--border); margin: 25px 0;">
<h3 style="color: var(--text); margin-top: 20px;">‚ú® H·ªá Th·ªëng PƒÅramƒ´</h3>

<p>C√°c th√†nh t·ª±u trong vi·ªác th·ª±c h√†nh thi·ªÅn s·∫Ω ƒë∆∞·ª£c ph√¢n lo·∫°i th√†nh c√°c PƒÅramƒ´ (Ba-la-m·∫≠t) ƒë·ªÉ kh√≠ch l·ªá s·ª± tinh t·∫•n. D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë c·ªôt m·ªëc ti√™u bi·ªÉu:</p>

<p style="margin-top: 15px;"><strong>üî• Chu·ªói Tinh T·∫•n (Li√™n t·ª•c):</strong></p>
<table class="intro-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
    <thead>
        <tr style="background: var(--bg);">
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">PƒÅramƒ´</th>
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">ƒêi·ªÅu ki·ªán</th>
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">√ù nghƒ©a</th>
        </tr>
    </thead>
    <tbody>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Kinh H√†nh</td><td style="padding: 8px; border: 1px solid var(--border);">3 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">B∆∞·ªõc ƒëi ƒë·∫ßu ti√™n c·ªßa h√†nh gi·∫£.</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Ph∆∞·ªõc B√°u</td><td style="padding: 8px; border: 1px solid var(--border);">7 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">T√≠ch l≈©y thi·ªán ph√°p trong m·ªôt tu·∫ßn.</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Nh∆∞ √ù T√∫c</td><td style="padding: 8px; border: 1px solid var(--border);">30 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">Th√≥i quen tu t·∫≠p ƒë√£ v·ªØng v√†ng.</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">T·ª© Ni·ªám X·ª©</td><td style="padding: 8px; border: 1px solid var(--border);">49 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">B·∫£y tu·∫ßn tu t·∫≠p mi√™n m·∫≠t.</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">ƒê·∫°i H√πng</td><td style="padding: 8px; border: 1px solid var(--border);">90 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">S·ª©c m·∫°nh tinh t·∫•n phi th∆∞·ªùng.</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">V√¥ Th·ªßy</td><td style="padding: 8px; border: 1px solid var(--border);">365 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">S·ª± ki√™n tr√¨ kh√¥ng gi·ªõi h·∫°n.</td></tr>
    </tbody>
</table>

<p><strong>üå± T·ªïng s·ªë l·∫ßn Ch√°nh ni·ªám:</strong></p>
<table class="intro-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
    <thead>
        <tr style="background: var(--bg);">
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">PƒÅramƒ´</th>
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">S·ªë Ch√°nh Ni·ªám</th>
        </tr>
    </thead>
    <tbody>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Nh·∫•t T√¢m</td><td style="padding: 8px; border: 1px solid var(--border);">100</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Thanh T·ªãnh</td><td style="padding: 8px; border: 1px solid var(--border);">500</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Bi·∫øt ƒê·ªß</td><td style="padding: 8px; border: 1px solid var(--border);">1,000</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">C√∫ng D∆∞·ªùng</td><td style="padding: 8px; border: 1px solid var(--border);">10,000</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">An L·∫°c</td><td style="padding: 8px; border: 1px solid var(--border);">50,000</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Ch√¢n Nh∆∞</td><td style="padding: 8px; border: 1px solid var(--border);">100,000</td></tr>
    </tbody>
</table>

<p><strong>‚è≥ T·ªïng th·ªùi gian tu t·∫≠p:</strong></p>
<table class="intro-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
    <thead>
        <tr style="background: var(--bg);">
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">PƒÅramƒ´</th>
            <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">Th·ªùi l∆∞·ª£ng</th>
        </tr>
    </thead>
    <tbody>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Hi·ªán T·∫°i</td><td style="padding: 8px; border: 1px solid var(--border);">1 gi·ªù</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Ch√°nh Ni·ªám</td><td style="padding: 8px; border: 1px solid var(--border);">10 gi·ªù</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Nh·∫≠p D√≤ng</td><td style="padding: 8px; border: 1px solid var(--border);">50 gi·ªù</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">Nhi·ªát Th√†nh</td><td style="padding: 8px; border: 1px solid var(--border);">100 gi·ªù</td></tr>
        <tr><td style="padding: 8px; border: 1px solid var(--border);">H∆∞ Kh√¥ng</td><td style="padding: 8px; border: 1px solid var(--border);">1,000 gi·ªù</td></tr>
    </tbody>
</table>

            <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid var(--warning); padding: 15px; border-radius: 8px; color: #fbbf24; font-size: 13px;">
                <strong>‚ö†Ô∏è L∆∞u √ù Quan Tr·ªçng V·ªÅ D·ªØ Li·ªáu:</strong>
                <ul style="margin: 5px 0 0 15px;">
                    <li>D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u trong <strong>IndexedDB</strong> c·ªßa tr√¨nh duy·ªát (An to√†n & dung l∆∞·ª£ng l·ªõn).</li>
                    <li><strong>Kh√¥ng x√≥a l·ªãch s·ª≠/cache tr√¨nh duy·ªát</strong> n·∫øu ch∆∞a sao l∆∞u, d·ªØ li·ªáu s·∫Ω b·ªã m·∫•t.</li>
                    <li><strong>C√°ch Sao L∆∞u:</strong> V√†o menu b√™n tr√°i, ch·ªçn <strong>"Sao l∆∞u"</strong> ƒë·ªÉ t·∫£i file v·ªÅ m√°y.</li>
                    <li><strong>C√°ch Kh√¥i Ph·ª•c:</strong> Ch·ªçn <strong>"Kh√¥i ph·ª•c"</strong> v√† t·∫£i l√™n file backup ƒë√£ c√≥.</li>
                </ul>
            </div>
            
             <div style="margin-top: 20px; text-align: center; color: var(--text-light); font-size: 12px; border-top: 1px solid var(--border); padding-top: 10px;">
                <strong>C√¥ng ngh·ªá:</strong> HTML5, CSS3, JS (ES6+).<br>
                <strong>Th∆∞ vi·ªán:</strong> <a href="https://www.chartjs.org/" target="_blank" style="color: var(--primary); text-decoration: none;">Chart.js</a>, <a href="https://fontawesome.com/" target="_blank" style="color: var(--primary); text-decoration: none;">FontAwesome</a>.<br>
                Link T·∫£i & M√£ Ngu·ªìn: <a href="https://github.com/buddhanussati/nhatky-hanhgia/releases"><b>t·∫°i ƒë√¢y.</b></a> Ch√∫c b·∫°n an l·∫°c v√† tinh t·∫•n!
            </div>
        </div>
        
       <div style="padding: 15px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 10px; background: var(--surface); border-radius: 0 0 16px 16px;">
    
    <button class="btn btn-secondary" onclick="app.resetApp()" style="color: var(--danger); margin-right: auto;">ƒê·∫∑t l·∫°i
    </button>
    
    <button class="btn btn-secondary" onclick="app.closeIntroModal()">ƒê√≥ng</button>
</div>
    </div>
</div>
    <audio id="bell" src="./audio/bell.mp3" preload="auto"></audio>

       <script src="./js/nh.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then(reg => console.log('PWA ƒë√£ s·∫µn s√†ng:', reg.scope))
        .catch(err => console.log('L·ªói PWA:', err));
    });
  }
</script>

</body>
</html>