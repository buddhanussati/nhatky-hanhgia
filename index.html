<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	<link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    <title>Nh·∫≠t K√Ω H√†nh Gi·∫£</title>
    <link href="./css/css.css" rel="stylesheet">
	<link href="./css/css2.css" rel="stylesheet">
 	<script src="./js/chart.js"></script>
</head>
<body>

<nav class="sidebar">
        <div class="logo"><i class="fas fa-hourglass-half"></i></div>
        <div class="nav-item active" onclick="app.switchView('dashboard')">
            <i class="fas fa-spa"></i><span class="nav-text">Nh·∫≠t K√Ω</span>
        </div>
        <div class="nav-item" onclick="app.switchView('calendar')">
            <i class="fas fa-calendar-alt"></i><span class="nav-text">L·ªãch tr√¨nh</span>
        </div>
        <div class="nav-item" onclick="app.switchView('reports')">
            <i class="fas fa-chart-pie"></i><span class="nav-text">T·ªïng h·ª£p</span>
        </div>
		<div class="nav-item" onclick="app.switchView('analytics')">
    <i class="fas fa-microscope"></i><span class="nav-text">Ph√¢n t√≠ch</span>
	
</div>
       <div class="nav-item" onclick="app.switchView('pro')">
    <i class="fas fa-gem"></i><span class="nav-text">Chuy√™n s√¢u</span>
</div>
        
        
        <div class="nav-item" onclick="app.exportData()">
    <i class="fas fa-save"></i><span class="nav-text">Sao l∆∞u</span>
</div>
        <div class="nav-item" onclick="app.resetApp()" style="color: var(--danger);"> <i class="fas fa-trash-alt"></i><span class="nav-text">ƒê·∫∑t l·∫°i</span>
        </div>
    </nav>


    <main class="main">
        <header>
            <div>
                <h1 id="page-title">Nh·∫≠t K√Ω H√†nh Gi·∫£</h1>
                <p style="color: var(--text-light); font-size: 14px;" id="current-date"></p>
            </div>
            
            <div class="user-stats">
    <div class="stat-item clickable" onclick="app.setGlobalDailyGoal()" title="Nh·∫•n ƒë·ªÉ s·ª≠a m·ª•c ti√™u ng√†y">
        <span class="stat-val"><span id="daily-current">0</span> / <span id="daily-target">120</span>p</span>
        <div class="daily-bar-bg"><div id="daily-bar-fill" class="daily-bar-fill"></div></div>
        <span class="stat-label">H√†ng ng√†y</span>
    </div>
    <div class="stat-item">
        <span class="stat-val" id="streak-disp">0 üî•</span>
        <span class="stat-label">Li√™n t·ª•c</span>
    </div>

    <div class="stat-item">
        <span class="stat-val" id="xp-disp">0</span>
        <span class="stat-label">Ch√°nh Ni·ªám</span>
    </div>

 <div class="stat-item clickable" onclick="app.openIntroModal()">
    <span class="stat-val" style="
        border: 2px solid var(--text-light); 
        border-radius: 50%; 
        width: 24px; 
        height: 24px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 14px;">?</span>
</div>

    <button class="btn" onclick="app.openChoiceModal()">
        <i class="fas fa-plus"></i> M·ª•c ti√™u m·ªõi
    </button>
</div>
        </header>

        <section id="view-dashboard" class="view-section active">
            <div id="active-goals-container" class="dashboard-grid"></div>
            <div id="empty-msg" class="empty-state" style="display:none;">
                <i class="fas fa-clipboard-list" style="font-size: 40px; margin-bottom: 10px;"></i>
                <p>Ch∆∞a c√≥ m·ª•c ti√™u n√†o. H√£y t·∫°o ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p>
            </div>
        </section>

        <section id="view-calendar" class="view-section">
		<div class="card" 
     onclick="app.renderRandomQuote()" 
     title="Ch·∫°m ƒë·ªÉ ƒë·ªïi c√¢u kh√°c"
     style="margin: 0 auto 20px auto; text-align: center; border-left: 5px solid var(--zen); cursor: pointer; transition: transform 0.2s; user-select: none; max-width: 450px;"
     onmouseover="this.style.transform='translateY(-2px)'" 
     onmouseout="this.style.transform='translateY(0)'">
    
    <h3 style="color: var(--zen); margin-bottom: 15px;">
        <i class="fas fa-dharmachakra"></i> Kinh Ph√°p C√∫
    </h3>
    
    <div id="dhammapada-display" style="
        font-style: italic; 
        font-size: 15px; 
        line-height: 1.6; 
        color: var(--text); 
        min-height: 60px; 
        padding: 0 10px;
        display: flex; 
        align-items: center; 
        justify-content: center;
        transition: opacity 0.3s ease;">
        </div>

<div id="dhammapada-source" style="font-size: 11px; color: var(--text-light); margin-top: 15px; opacity: 0.7;">
</div>
</div>
            <div class="card">
                <h3 style="text-align: center;">L·ªãch Tu T·∫≠p</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0;">
                    <button class="btn btn-secondary" onclick="app.changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="cal-month-year">Th√°ng NƒÉm</h4>
                    <button class="btn btn-secondary" onclick="app.changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
			
        </section>

        <section id="view-reports" class="view-section">
    <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 25px;">
        <button class="btn" id="btn-rep-time" onclick="app.setReportMode('time')">
            <i class="fas fa-clock"></i> Th·ªùi gian
        </button>
        <button class="btn btn-secondary" id="btn-rep-mind" onclick="app.setReportMode('mindfulness')">
            <i class="fas fa-spa"></i> Ch√°nh ni·ªám
        </button>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: 1fr;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h4 id="breakdown-title" style="margin: 0;">Th·ªùi gian</h4>
        
        <select id="report-range-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderReports(true)">
            <option value="all">To√†n b·ªô</option>
            <option value="today">H√¥m nay</option>
			<option value="yesterday">H√¥m qua</option>
            <option value="this_week" selected>Tu·∫ßn n√†y</option>
            <option value="last_week">Tu·∫ßn tr∆∞·ªõc</option>
            <option value="this_month">Th√°ng n√†y</option>
            <option value="last_month">Th√°ng tr∆∞·ªõc</option>
        </select>
    </div>
    
    <div style="height: 300px; display:flex; justify-content:center;">
        <canvas id="goalBreakdownChart"></canvas>
    </div>
</div>
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportWeek(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="weekly-report-title">Ti√™u ƒëi·ªÉm tu·∫ßn</h4>
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportWeek(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div style="height: 300px;">
                    <canvas id="weeklyChart"></canvas>
                </div>
            </div>
            </div>
            
            <div class="card" style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                <h4 id="monthly-report-title">Ti√™u ƒëi·ªÉm th√°ng</h4>
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeReportMonth(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div style="height: 300px;">
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>
    </div>
	
		<div class="card" style="margin-top: 30px;">
                <h3 style="text-align: center;"><i class="fas fa-medal"></i> Th√†nh t·ª±u</h3>
                <div id="achievement-list" style="margin-top: 20px; display: grid; gap: 10px;"></div>
            </div>
</section>
<section id="view-analytics" class="view-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
        <h2 style="margin: 0;">Ph√¢n t√≠ch Thi·ªÅn t·∫≠p</h2>

        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <select id="ana-goal-select" class="form-control" style="width: auto; max-width: 150px;" onchange="app.renderAnalytics(true)">
                </select>

            <select id="ana-time-range" class="form-control" style="width: auto;" onchange="app.renderAnalytics()">
                <option value="3" selected>3 ng√†y qua</option>
                <option value="7">7 ng√†y qua</option>
				<option value="14">14 ng√†y qua</option>
                <option value="30">30 ng√†y qua</option>
                <option value="90">3 th√°ng qua</option>
                <option value="365">To√†n b·ªô</option>
            </select>
        </div>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
        <div class="card" style="text-align: center; border-left: 4px solid var(--success);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">Ch·∫•t l∆∞·ª£ng trung b√¨nh</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-avg-quality">0%</div>
            <div style="font-size: 11px; color: var(--text-light);">T·ª∑ l·ªá t·ªânh th·ª©c/th·ªùi gian</div>
        </div>
        <div class="card" style="text-align: center; border-left: 4px solid var(--primary);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">Ch·∫•t l∆∞·ª£ng Ch√°nh ni·ªám</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-avg-density">0</div>
            <div style="font-size: 11px; color: var(--text-light);">Ch√°nh ni·ªám / ph√∫t</div>
        </div>
        <div class="card" style="text-align: center; border-left: 4px solid var(--danger);">
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase;">T·ªïng ch√°nh ni·ªám</div>
            <div style="font-size: 28px; font-weight: bold; margin: 5px 0;" id="ana-total-mindful">0h</div>
            <div style="font-size: 11px; color: var(--text-light);">Th·ªùi gian t·ªânh th·ª©c</div>
        </div>
    </div>

    <div class="dashboard-grid" style="grid-template-columns: 1fr; gap: 20px;">
        <div class="card">
            <h3>üìà Chi·ªÅu h∆∞·ªõng T·ªânh th·ª©c</h3>
            <p style="font-size: 12px; color: var(--text-light); margin-bottom: 15px;">So s√°nh t·ª∑ l·ªá ch√°nh ni·ªám gi·ªØa c√°c th·ªùi thi·ªÅn</p>
            <div style="height: 300px;">
                <canvas id="analyticsTrendChart"></canvas>
            </div>
        </div>
<div class="card" style="margin-top: 20px;">
    <h3>üìä T·ªânh gi√°c trong ng√†y</h3>
    <p style="font-size: 12px; color: var(--text-light); margin-bottom: 15px;">
        Ch·∫•t l∆∞·ª£ng & t·ªïng th·ªùi l∆∞·ª£ng tu t·∫≠p h√†ng ng√†y
    </p>
    <div style="height: 250px;">
        <canvas id="analyticsHourlyChart"></canvas>
    </div>
</div>
        <div class="card">
            <h3><i class="fas fa-chart-area"></i> So s√°nh K·∫øt qu·∫£</h3>
            <div style="margin-top: 15px;">
                <table style="width: 100%; border-collapse: collapse; font-size: 13px; table-layout: fixed;">
                    <thead>
                        <tr style="border-bottom: 2px solid var(--border); color: var(--text-light);">
                            <th style="text-align: left; padding: 10px;">Th·ªùi gian</th>
                            <th style="text-align: center; padding: 10px;">Th·ªùi thi·ªÅn</th>
                            <th style="text-align: center; padding: 10px;">T·ªïng gi·ªù</th>
                            <th style="text-align: center; padding: 10px;">Ch·∫•t l∆∞·ª£ng</th>
                            <th style="text-align: center; padding: 10px;">Ch√°nh ni·ªám&#8203;/&#8203;ph√∫t</th>
                        </tr>
                    </thead>
                    <tbody id="ana-comparison-table">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
       <section id="view-pro" class="view-section">
    <div class="dashboard-grid" style="grid-template-columns: 1fr;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="margin: 0;">üíé M·ª©c ch√∫ t√¢m (Pro)</h4>
                    <select id="pro-range-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderProAnalytics(true)">
                        <option value="all">To√†n b·ªô</option>
                        <option value="today">H√¥m nay</option>
						<option value="yesterday">H√¥m qua</option>
                        <option value="this_week" selected>Tu·∫ßn n√†y</option>
                        <option value="last_week">Tu·∫ßn tr∆∞·ªõc</option>
                        <option value="this_month">Th√°ng n√†y</option>
                        <option value="last_month">Th√°ng tr∆∞·ªõc</option>
                    </select>
                </div>
                <div style="height: 300px; display:flex; justify-content:center;">
                    <canvas id="proBreakdownChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProWeek(-1)"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="pro-weekly-title">Tu·∫ßn n√†y</h4>
                    <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProWeek(1)"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div style="height: 300px;">
                    <canvas id="proWeeklyChart"></canvas>
                </div>
            </div>
        </div>
<div class="card" style="margin-top: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h4 style="margin: 0;">üìà Xu h∆∞·ªõng Ch√∫ t√¢m</h4>
        <select id="pro-trend-select" class="form-control" style="width: auto; padding: 5px; font-size: 13px; height: 32px;" onchange="app.renderProTrendChart()">
            <option value="3" selected>3 ng√†y qua</option>
			<option value="7">7 ng√†y qua</option>
            <option value="14">14 ng√†y qua</option>
            <option value="30">30 ng√†y qua</option>
			<option value="90">3 th√°ng qua</option>
            <option value="all">To√†n b·ªô</option>
        </select>
    </div>
    <p style="font-size: 11px; color: var(--text-light); margin-bottom: 15px;">
        M·ª©c ch√∫ t√¢m trung b√¨nh qua c√°c th·ªùi thi·ªÅn
    </p>
    <div style="height: 300px;">
        <canvas id="proTrendChart"></canvas>
    </div>
</div>
        <div class="card" style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                <h4 id="pro-monthly-title">Th√°ng n√†y</h4>
                <button class="btn btn-secondary" style="padding: 5px 10px;" onclick="app.changeProMonth(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div style="height: 300px;">
                <canvas id="proMonthlyChart"></canvas>
            </div>
        </div>
		
		
    </div>
</section>
    </main>

    <div class="modal" id="choice-modal">
        <div class="modal-content">
            <h2 style="text-align:center;">Ch·ªçn lo·∫°i m·ª•c ti√™u</h2>
            <div class="choice-btn-container">
                <div class="choice-card" onclick="app.openModal(null, 'meditation')">
                    <i class="fas fa-spa" style="color: var(--zen);"></i>
                    <h3>Thi·ªÅn ƒê·ªãnh</h3>
                    <p style="font-size:12px; color:var(--text-light); margin-top:5px;">Theo d√µi ch√°nh ni·ªám</p>
                </div>
                <div class="choice-card" onclick="app.openModal(null, 'standard')">
                    <i class="fas fa-tasks" style="color: var(--primary);"></i>
                    <h3>C√¥ng Vi·ªác</h3>
                    <p style="font-size:12px; color:var(--text-light); margin-top:5px;">Theo d√µi ti·∫øn ƒë·ªô</p>
                </div>
            </div>
            <button class="btn btn-secondary" style="width:100%; margin-top:20px;" onclick="app.closeChoiceModal()">H·ªßy</button>
        </div>
    </div>

    <div class="modal" id="goal-modal">
        <div class="modal-content">
            <h2 id="modal-title" style="margin-bottom: 20px;">T·∫°o m·ª•c ti√™u m·ªõi</h2>
            <form onsubmit="app.saveGoal(event)">
                <input type="hidden" id="g-id"> 
                <input type="hidden" id="g-type"> 
                
                <div class="form-group">
                    <label>T√™n m·ª•c ti√™u</label>
                    <input type="text" id="g-name" class="form-control" required>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>Danh m·ª•c</label>
                        <select id="g-cat" class="form-control">
                            </select>
                    </div>
                    <div class="form-group">
                        <label>M√†u s·∫Øc</label>
                        <input type="color" id="g-color" class="form-control" value="#6366f1">
                    </div>
                </div>
                
                <div class="form-group" style="background: rgba(16, 185, 129, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <label style="color: var(--success);">M·ª•c ti√™u h√†ng ng√†y</label>
                    <input type="number" id="g-daily-target" class="form-control" min="0" value="30">
                    <small id="g-daily-hint" style="color: var(--success); font-size: 11px;">Ph√∫t m·ªói ng√†y</small>
                </div>
                
                <div class="form-group">
                    <label>Th√†nh t·ª±u trong</label>
                    <input type="number" id="g-lifetime-target" class="form-control" required min="1" value="1000">
                    <small id="g-life-hint" style="color: var(--text-light); font-size: 11px;">T·ªïng s·ªë ph√∫t</small>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="app.closeModal()">H·ªßy</button>
                    <button type="submit" class="btn" id="btn-save-goal">T·∫°o m·ª•c ti√™u</button>
                </div>
            </form>
        </div>
    </div>
<div class="modal" id="backup-modal">
    <div class="modal-content">
        <h2 style="margin-bottom: 10px; text-align: center;">Sao l∆∞u & Kh√¥i ph·ª•c</h2>
        
        <div class="desktop-actions" style="margin-bottom: 20px;">
            <p style="color: var(--text-light); text-align: center; font-size: 12px; margin-bottom: 10px;">
                <i class="fas fa-box-archive"></i> <strong>T·ª± ƒë·ªông sao l∆∞u & kh√¥i ph·ª•c d·ªØ li·ªáu:</strong>
            </p>
            <div style="display: flex;  justify-content: center; gap: 10px;">
                <button class="btn" style="flex: 1;" onclick="app.downloadFile()">
                    <i class="fas fa-download"></i> Sao l∆∞u
                </button>
                <button class="btn btn-secondary"; style="flex: 1;" " onclick="document.getElementById('backup-file-input').click()">
                    <i class="fas fa-file-import"></i> Kh√¥i&nbsp;ph·ª•c
                </button>
                <input type="file" id="backup-file-input" style="display: none;" accept=".json, .txt" onchange="app.handleFileUpload(this)">
            </div>
        </div>
<div style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
    
    <button class="btn btn-secondary" style="flex: 1;" onclick="app.shareBackup()">
        <i class="fas fa-share-alt"></i> Chia&nbsp;s·∫ª
    </button>

    <button class="btn btn-secondary" style="flex: 1; border-color: var(--danger); color: var(--danger);" onclick="app.closeBackupModal()">
        ƒê√≥ng
    </button>
</div>
</div></div>
    <div class="modal" id="session-modal" >
    <div class="modal-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 id="session-title" style="margin: 0;">Ghi nh·∫≠n phi√™n</h2>
            <button type="button" id="btn-delete-session" class="btn-icon" 
                style="background: transparent; color: var(--danger); display: none; width: 30px; height: 30px;" 
                onclick="app.deleteSession()"
                title="X√≥a phi√™n n√†y">
                <i class="fas fa-trash"></i>
            </button>
        </div>
            <form onsubmit="app.logSessionConfirm(event)">
                <input type="hidden" id="s-goal-id" />
                <input type="hidden" id="s-log-id" />
                
                <div class="form-group">
                    <label>Ng√†y & Gi·ªù b·∫Øt ƒë·∫ßu</label>
                    <input type="datetime-local" id="s-date" class="form-control" required />
                </div>
                
                <div class="form-group">
                    <label>Th·ªùi l∆∞·ª£ng (Ph√∫t)</label>
                    <input type="number" id="s-minutes" class="form-control" required min="1" />
                </div>
                <div class="form-group" id="s-mindfulness-group" style="display:none; background: rgba(167, 139, 250, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(167, 139, 250, 0.3);">
    <label style="color: var(--zen);">S·ªë l·∫ßn ch√°nh ni·ªám</label>
    <input type="number" id="s-mindfulness" class="form-control" min="0" value="0" />
    
    <div style="margin-top: 10px; border-top: 1px solid rgba(167, 139, 250, 0.3); padding-top: 10px;">
        <label style="color: var(--zen); font-size: 12px;">Ng∆∞·ª°ng m·∫•t t·∫≠p trung (gi√¢y)</label>
        <input type="number" id="s-threshold" class="form-control" min="1" value="12" style="background: rgba(0,0,0,0.2);" />
    </div>
</div>
               <div class="form-group">
    <label>Ghi ch√∫ (T√πy ch·ªçn)</label>
    <textarea id="s-notes" class="form-control" placeholder="B·∫°n ƒë√£ t·∫≠p trung v√†o ƒëi·ªÅu g√¨?"></textarea>
    <div id="session-tags" class="tag-container"></div>
</div>

                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="app.closeSessionModal()">H·ªßy</button>
                    <button type="submit" class="btn">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

 <div id="meditation-overlay">
    <div class="med-timer-disp" id="med-timer">00:00</div>
    <div class="med-controls">
    <button class="btn btn-secondary" onclick="app.openMedSettings()" title="C√†i ƒë·∫∑t ch·∫°m">
        <i class="fas fa-cog"></i>
    </button>
    
    <button class="btn btn-secondary" onclick="app.togglePauseMeditation()" id="med-pause-btn"><i class="fas fa-pause"></i></button>
    <button class="btn" style="background-color: var(--danger); color: white;" onclick="app.concludeMeditationSession()"><i class="fas fa-stop"></i></button>
</div>
	
	<div id="med-quote-container" class="med-quote-box">
    <div id="med-quote-text" style="font-style: italic; font-size: 14px; margin-bottom: 8px; line-height: 1.4; text-shadow: 0 2px 4px rgba(0,0,0,0.8);"></div>
</div>
    <div class="meditation-circle" id="med-counter">0</div>
    
    <div class="med-instruction" style="text-align: center;">Ch·∫°m m√†n h√¨nh ƒë·ªÉ ghi&nbsp;nh·∫≠n&nbsp;ch√°nh&nbsp;ni·ªám</div>
</div>

    <div class="modal" id="meditation-finish-modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 10px;">Th·ªùi thi·ªÅn ho√†n t·∫•t üåø</h2>
            <div style="text-align:center; margin: 20px 0; display:flex; justify-content:space-around; align-items:center;">
                <div>
                    <div style="font-size: 30px; font-weight:bold; color:var(--zen)" id="med-finish-count">0</div>
                    <div style="color:var(--text-light); font-size:12px;">Ch√°nh ni·ªám</div>
                </div>
                <div style="height:40px; width:1px; background:var(--border);"></div>
                <div>
                    <div style="font-size: 30px; font-weight:bold; color:var(--text)" id="med-finish-time">0m</div>
                    <div style="color:var(--text-light); font-size:12px;">Th·ªùi gian</div>
                </div>
            </div>
            <div class="form-group">
    <label>Nh·∫≠t k√Ω</label>
    <textarea id="med-finish-notes" class="form-control" placeholder="Ch√°nh ni·ªám c·ªßa b·∫°n c√≥ t·ªët kh√¥ng?"></textarea>
    <div id="finish-tags" class="tag-container"></div>
</div>
            <div id="med-finish-actions" style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
             <button id="btn-med-discard" class="btn btn-secondary" onclick="app.discardMeditation()">H·ªßy b·ªè</button>
             <button id="btn-med-save" class="btn" style="background:var(--zen); color:white" onclick="app.saveMeditationLog()">L∆∞u nh·∫≠t k√Ω</button>
        </div>
    </div>
</div>
    <div class="modal" id="graph-modal" style="overflow-y: auto; z-index: 150;">
        <div class="modal-content" style="width: 600px;">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom: 20px;">
                <div>
                    <h2 style="margin-bottom: 5px;">Th·ªùi thi·ªÅn</h2>
                    <p id="graph-date" style="color: var(--text-light); font-size: 14px; margin: 0;"></p>
                </div>
               
            </div>

            <div style="height: 300px; width: 100%;">
                <canvas id="sessionGraph"></canvas>
            </div>
            
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
			<button class="btn btn-secondary" id="btn-export-session" title="Sao ch√©p d·ªØ li·ªáu JSON">
                    <i class="fas fa-file-code"></i>
                </button>
			<select id="graph-type-select" class="form-control" style="width: auto; padding: 5px; height: 36px; font-size: 13px; cursor: pointer;" onchange="app.updateSessionChart()">
    <option value="interval">‚òÅÔ∏è Th·∫•t ni·ªám</option>
    <option value="intensity">üå± Ch√°nh ni·ªám</option>
    <option value="pro">üíé M·ª©c ch√∫ t√¢m (Pro)</option> </select>
                
                <button class="btn btn-secondary" onclick="document.getElementById('graph-modal').style.display='none'" title="ƒê√≥ng"><i class="fas fa-xmark"></i></button>
				 
            </div>
        </div>
    </div>

    <div class="modal" id="day-details-modal" style="overflow-y: auto;">
    <div class="modal-content">
        <h2 id="day-modal-title" style="margin-bottom: 10px; font-size: 20px;">Chi ti·∫øt ng√†y</h2>
        
        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
            <button class="btn" id="btn-modal-time" style="padding: 5px 15px; font-size: 12px;" onclick="app.switchDayChart('time')">
                <i class="fas fa-clock"></i> Th·ªùi gian
            </button>
            <button class="btn btn-secondary" id="btn-modal-mind" style="padding: 5px 15px; font-size: 12px;" onclick="app.switchDayChart('mindfulness')">
                <i class="fas fa-spa"></i> Ch√°nh ni·ªám
            </button>
        </div>

        <div style="height: 200px; position: relative; margin-bottom: 20px;">
            <canvas id="dayBreakdownChart"></canvas>
        </div>

        <h3 style="font-size: 14px; color: var(--text-light); border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-bottom: 10px;">Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</h3>
        <div id="day-session-list" style="max-height: 150px; overflow-y: auto;"></div>
        
        <div style="display: flex; justify-content: flex-end; margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px;">
            <button class="btn btn-secondary" onclick="app.closeDayModal()">ƒê√≥ng</button>
        </div>
    </div>
</div>

    <div id="toast" class="toast">
        <i class="fas fa-info-circle"></i> <span id="toast-msg">Th√¥ng b√°o</span>
    </div>
	<div class="modal" id="med-settings-modal" style="z-index: 2000;">
    <div class="modal-content" style="max-width: 350px;">
        <h3 style="margin-bottom: 15px; text-align: center;">C·∫•u h√¨nh T∆∞∆°ng t√°c</h3>
        
        <div class="form-group">
            <label style="margin-bottom: 8px;">Ch·∫ø ƒë·ªô ghi nh·∫≠n</label>
            <div class="mode-grid">
                <button type="button" class="btn btn-secondary" id="btn-mode-tap" onclick="app.setMedMode('tap')">Ch·∫°m</button>
                <button type="button" class="btn btn-secondary" id="btn-mode-hold" onclick="app.setMedMode('hold')">Gi·ªØ</button>
                <button type="button" class="btn btn-secondary" id="btn-mode-auto" onclick="app.setMedMode('auto')">‚ú® Auto</button>
                <button type="button" class="btn btn-secondary" id="btn-mode-pro" onclick="app.setMedMode('pro')">üíé Pro</button>
            </div>
            <div id="mode-desc" style="font-size: 11px; color: var(--zen); font-style: italic; margin-top: -5px; margin-bottom: 15px; min-height: 18px;"></div>
        </div>

        <div id="setting-hold-group" class="form-group" style="display:none;">
            <label>Th·ªùi gian gi·ªØ: <span id="disp-hold-time" style="color:var(--primary)">0.4s</span></label>
            <input type="range" id="inp-hold-time" class="form-control" min="200" max="2000" step="100" oninput="app.updateMedSettingDisplay()">
        </div>

        <div id="setting-tap-group" class="form-group" style="display:none;">
            <label>S·ªë l·∫ßn ch·∫°m ƒë·ªÉ ghi nh·∫≠n</label>
            <select id="inp-tap-count" class="form-control" onchange="app.saveMedSettings()">
                <option value="1">1 l·∫ßn (Ch·∫°m ƒë∆°n)</option>
                <option value="2">2 l·∫ßn (Ch·∫°m ƒë√∫p)</option>
                <option value="3">3 l·∫ßn (Ch·∫°m ba)</option>
                <option value="4">4 l·∫ßn (Ch·∫°m b·ªën)</option>
            </select>
        </div>

        <div id="setting-pro-legend" style="display:none; background: rgba(167, 139, 250, 0.1); padding: 10px; border-radius: 8px; border: 1px solid rgba(167, 139, 250, 0.3); margin-bottom: 15px;">
    <div style="font-size: 11px; margin-bottom: 5px; color: var(--text-light)">üíé M·ª©c ch√∫ t√¢m (Pro):</div>
    <div style="font-size: 12px; display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
        <div class="text-q4">1 Ch·∫°m: <strong>Th·∫•p</strong></div>
		<div class="text-q2">·∫§n Gi·ªØ: <strong>T·ªët</strong></div>
		<div class="text-q3">2 Ch·∫°m: <strong>Trung b√¨nh</strong></div>
        <div class="text-q1">10+ T·ªët: <strong>Cao</strong></div>
    </div>
</div>

        <div class="form-group" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
            <label style="margin:0"><i class="fas fa-mobile-alt"></i> Rung ph·∫£n h·ªìi</label>
            <input type="checkbox" id="inp-vibrate" style="width: 20px; height: 20px;" onchange="app.saveMedSettings()">
        </div>

        <div style="margin-top: 25px;">
            <button class="btn" style="width: 100%;" onclick="app.closeMedSettings()">ƒê√≥ng & √Åp d·ª•ng</button>
        </div>
    </div>
</div>
	
<div class="modal" id="intro-modal" style="z-index: 9999;">
    <div class="modal-content" style="max-width: 800px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; padding: 0;">
        
        <div style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: var(--surface); border-radius: 16px 16px 0 0;">
            <h2 style="margin: 0;">‚ú® Nh·∫≠t K√Ω H√†nh Gi·∫£</h2>
            <button class="btn-icon" onclick="app.closeIntroModal()" style="color: var(--text-light); background: transparent;"><i class="fas fa-times"></i></button>
        </div>

        <div style="padding: 20px; overflow-y: auto; line-height: 1.6; color: var(--text-light);">
            
            <p><strong>Nh·∫≠t K√Ω H√†nh Gi·∫£</strong> l√† ·ª©ng d·ª•ng h·ªó tr·ª£ tu t·∫≠p v√† l√†m vi·ªác. ·ª®ng d·ª•ng gi√∫p h√†nh gi·∫£ theo d√µi ti·∫øn tr√¨nh trong c√¥ng vi·ªác c≈©ng nh∆∞ trong h√†nh thi·ªÅn, ghi nh·∫≠n m·ª©c ƒë·ªô t·ªânh gi√°c th√¥ng qua s·ªë l·∫ßn "Ch√°nh Ni·ªám", v√† tr·ª±c quan h√≥a tr·∫°ng th√°i t√¢m tr√≠ qua bi·ªÉu ƒë·ªì & ƒë·ªì th·ªã theo th·ªùi gian th·ª±c.</p>
            
            <img src="./images/1vi.png" alt="Dashboard Preview" style="width: 100%; border-radius: 8px; border: 1px solid var(--border); margin: 10px 0;">

            <h3 style="color: var(--text); margin-top: 20px;">‚ú® C√°c Kh√°i Ni·ªám C·ªët L√µi</h3>
            <p>ƒê·ªÉ s·ª≠ d·ª•ng ·ª©ng d·ª•ng hi·ªáu qu·∫£, b·∫°n c·∫ßn n·∫Øm r√µ c√°c ch·ªâ s·ªë sau:</p>
            <ul style="padding-left: 20px; margin-bottom: 15px;">
                <li><strong>Ch√°nh Ni·ªám:</strong> ƒê∆°n v·ªã ƒëo l∆∞·ªùng s·ª± t·ªânh gi√°c. M·ªói l·∫ßn b·∫°n nh·∫≠n bi·∫øt ƒë∆∞·ª£c h∆°i th·ªü ho·∫∑c tr·∫°ng th√°i t√¢m tr√≠ v√† ch·∫°m v√†o m√†n h√¨nh, m·ªôt "Ch√°nh Ni·ªám" s·∫Ω ƒë∆∞·ª£c ghi l·∫°i.</li>
                <li><strong>Ch√°nh ni·ªám t·ªët:</strong> Tr·∫°ng th√°i khi t·∫ßn su·∫•t ghi nh·∫≠n (Ni·ªám) duy tr√¨ ·ªü m·ª©c ·ªïn ƒë·ªãnh v√† ƒë·ªÅu ƒë·∫∑n.</li>
                <li><strong>Th·∫•t ni·ªám:</strong> Tr·∫°ng th√°i khi t√¢m tr√≠ b·ªã xao nh√£ng ho·∫∑c bu·ªìn ng·ªß, d·∫´n ƒë·∫øn vi·ªác kh√¥ng c√≥ ho·∫∑c c√≥ r·∫•t √≠t ghi nh·∫≠n trong m·ªôt kho·∫£ng th·ªùi gian.</li>
                <li><strong>Chu·ªói Tinh T·∫•n:</strong> S·ªë ng√†y li√™n ti·∫øp b·∫°n th·ª±c hi·ªán tu t·∫≠p.</li>
            </ul>

            <h3 style="color: var(--text); margin-top: 20px;">‚ú® T√≠nh NƒÉng N·ªïi B·∫≠t</h3>
            
            <h4 style="color: var(--primary);">1. Qu·∫£n L√Ω M·ª•c Ti√™u ƒêa D·∫°ng</h4>
            <ul style="padding-left: 20px;">
                <li><strong>Hai lo·∫°i m·ª•c ti√™u ch√≠nh:</strong>
                    <ul>
                        <li><strong>‡•ê Thi·ªÅn ƒê·ªãnh:</strong> Theo d√µi th·ªùi gian ng·ªìi thi·ªÅn v√† ƒë·∫øm s·ªë l·∫ßn ghi nh·∫≠n ch√°nh ni·ªám.</li>
                        <li><strong>‚ö° C√¥ng Vi·ªác:</strong> ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c truy·ªÅn th·ªëng d√πng cho c√¥ng vi·ªác, h·ªçc t·∫≠p (Pomodoro) ho·∫∑c c√°c th√≥i quen kh√°c.</li>
                    </ul>
                </li>
                <li><strong>T√πy bi·∫øn:</strong> T·ª± ƒë·∫∑t m·ª•c ti√™u h√†ng ng√†y (s·ªë ph√∫t), th·ªùi gian c·∫ßn d√†nh ƒë·ªÉ ho√†n th√†nh m·ª•c ti√™u, m√†u s·∫Øc ƒë·∫°i di·ªán v√† danh m·ª•c qu·∫£n l√Ω.</li>
            </ul>

            <h4 style="color: var(--primary); margin-top: 15px;">2. C·∫•u h√¨nh T∆∞∆°ng T√°c & Ch·∫ø ƒê·ªô Pro </h4>
            <p>Trong giao di·ªán thi·ªÅn, nh·∫•n n√∫t <i class="fas fa-cog"></i> ƒë·ªÉ m·ªü c√†i ƒë·∫∑t t∆∞∆°ng t√°c. ·ª®ng d·ª•ng h·ªó tr·ª£ rung ph·∫£n h·ªìi x√∫c gi√°c & 4 ch·∫ø ƒë·ªô ghi nh·∫≠n:</p>
            
            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; border: 1px solid var(--border);">
                <ul style="padding-left: 20px; margin: 0;">
                    <li style="margin-bottom: 8px;"><strong>Ch·∫°m:</strong> Ch·∫ø ƒë·ªô c∆° b·∫£n. Ch·∫°m nh·∫π m√†n h√¨nh ƒë·ªÉ ƒë·∫øm. C√≥ th·ªÉ c√†i ƒë·∫∑t ch·∫°m 1, 2, 3 ho·∫∑c 4 l·∫ßn m·ªõi t√≠nh l√† 1 ni·ªám (gi√∫p l·ªçc b·ªõt t√† ni·ªám).</li>
                    <li style="margin-bottom: 8px;"><strong>Gi·ªØ:</strong> ·∫§n v√† gi·ªØ m√†n h√¨nh trong m·ªôt kho·∫£ng th·ªùi gian (m·∫∑c ƒë·ªãnh 0.4s) ƒë·ªÉ ghi nh·∫≠n ch√°nh ni·ªám.</li>
                    <li style="margin-bottom: 8px;"><strong>‚ú® Auto:</strong> T·ª± ƒë·ªông nh·∫≠n di·ªán c·∫£ thao t√°c Ch·∫°m v√† Gi·ªØ.</li>
                    <li><strong>üíé Ch·∫ø ƒë·ªô Pro (Chuy√™n s√¢u):</strong> ƒê√°nh gi√° m·ª©c ƒë·ªô ch√∫ t√¢m ngay l√∫c ghi nh·∫≠n. H·ªá th·ªëng s·∫Ω l∆∞u l·∫°i "ƒëi·ªÉm ch√∫ t√¢m" d·ª±a tr√™n thao t√°c tay c·ªßa b·∫°n:
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px; font-size: 13px;">
                            <div style="color: #f87171;">‚óè 1 Ch·∫°m: <strong>Th·∫•p</strong></div>
                            <div style="color: #60a5fa;">‚óè ·∫§n gi·ªØ: <strong>T·ªët</strong></div>
                            <div style="color: #fbbf24;">‚óè 2 Ch·∫°m: <strong>Trung b√¨nh</strong></div>
                            <div style="color: #34d399;">‚óè 10+ T·ªët*: <strong>Cao</strong></div>
                        </div>
                    </li>
                </ul>
            </div>
			<p style="font-size: 13px; color: var(--text-light); margin-top: 10px;"><strong>10+ T·ªët:</strong> M·ª©c ch√∫ t√¢m T·ªët t·ª´ 10 l·∫ßn li√™n t·ª•c tr·ªü l√™n, m·ªói l·∫ßn li√™n t·ª•c ti·∫øp theo s·∫Ω ƒë∆∞·ª£c t√≠nh l√† ·ªü m·ª©c Cao.<br>
            <strong>L∆∞u √Ω:</strong> Ph·∫£n h·ªìi x√∫c gi√°c y√™u c·∫ßu thi·∫øt b·ªã c√≥ h·ªó tr·ª£ ch·∫ø ƒë·ªô rung.</p>
 <div style="text-align: center; margin: 15px 0;">
                <img src="./images/2vi.png" alt="Meditation Mode" style="max-width: 300px; width: 100%; border-radius: 8px; border: 1px solid var(--border);">
            </div>
            <ul style="padding-left: 20px;">
			                <li><strong>Nh·∫≠p li·ªáu th·ªß c√¥ng:</strong> Qu√™n b·∫•m gi·ªù? B·∫°n c√≥ th·ªÉ t·ª± nh·∫≠p l·∫°i phi√™n thi·ªÅn ho·∫∑c s·ª≠a ƒë·ªïi c√°c ghi ch√©p c≈©.</li>

			
            <h4 style="color: var(--primary); margin-top: 15px;">3. B√°o C√°o & Ph√¢n T√≠ch S·ªë Li·ªáu</h4>
            <ul style="padding-left: 20px;">
                <li><strong>B·∫£ng nh·∫≠t k√Ω:</strong> Xem ti·∫øn ƒë·ªô ng√†y h√¥m nay so v·ªõi m·ª•c ti√™u ƒë·ªÅ ra.</li>
                <li><strong>L·ªãch tu t·∫≠p:</strong> Bi·ªÉu ƒë·ªì d·∫°ng l∆∞·ªõi hi·ªÉn th·ªã m·ª©c ƒë·ªô tu t·∫≠p theo ng√†y. M√†u c√†ng nhi·ªÅu th·ªÉ hi·ªán th·ªùi gian tu t·∫≠p c√†ng nhi·ªÅu.</li>
                <li><strong>Bi·ªÉu ƒë·ªì tr·ª±c quan:</strong>
                    <ul>
                        <li><strong>Bi·ªÉu ƒë·ªì phi√™n:</strong> Xem l·∫°i m·ª©c ƒë·ªô ch√°nh ni·ªám <em>trong t·ª´ng th·ªùi thi·ªÅn</em> (bi·ªÉu ƒë·ªì ƒë∆∞·ªùng).</li>
                        <li><strong>B√°o c√°o Tu·∫ßn/Th√°ng:</strong> So s√°nh hi·ªáu su·∫•t theo th·ªùi gian th·ª±c.</li>
                        <li><strong>üíé Bi·ªÉu ƒë·ªì Chuy√™n s√¢u:</strong> Tab "Chuy√™n s√¢u" hi·ªÉn th·ªã bi·ªÉu ƒë·ªì ph√¢n b·ªë m·ª©c ƒë·ªô ch√∫ t√¢m (Cao/Th·∫•p) qua c√°c tu·∫ßn.</li>
                    </ul>
                </li>
            </ul>
            
            <h4 style="color: var(--primary); margin-top: 15px;">4. Ph√¢n T√≠ch Thi·ªÅn T·∫≠p</h4>
            <p>Tab <strong>"Ph√¢n t√≠ch"</strong> gi√∫p b·∫°n soi chi·∫øu l·∫°i ch·∫•t l∆∞·ª£ng t√¢m trong c√°c th·ªùi thi·ªÅn v·ªõi ƒë·ªô ch√≠nh x√°c cao h∆°n.</p>
            <ul style="padding-left: 20px;">
                <li><strong>Ph√¢n t√≠ch theo t·ª´ng m·ª•c ti√™u:</strong> B·∫°n c√≥ th·ªÉ ch·ªçn xem s·ªë li·ªáu c·ªßa ri√™ng "Thi·ªÅn T·ªça" hay "Thi·ªÅn H√†nh" ƒë·ªÉ so s√°nh s·ª± ti·∫øn b·ªô c·ªßa t·ª´ng ph∆∞∆°ng ph√°p tu t·∫≠p.</li>
                
                <li style="margin-top: 10px;">
                    <strong> Ng∆∞·ª°ng m·∫•t t·∫≠p trung:</strong>
                    <p style="font-size: 13px; color: var(--text-light); margin-top: 5px;">
                        ƒê√¢y l√† kh√°i ni·ªám quan tr·ªçng nh·∫•t ƒë·ªÉ t√≠nh to√°n "Ch·∫•t l∆∞·ª£ng thi·ªÅn".
                    </p>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 6px; border-left: 3px solid var(--warning); margin: 5px 0;">
                        <em>"Ng∆∞·ª°ng m·∫•t t·∫≠p trung" l√† kho·∫£ng th·ªùi gian t·ªëi ƒëa cho ph√©p gi·ªØa hai l·∫ßn ghi nh·∫≠n; n·∫øu v∆∞·ª£t qu√° th·ªùi gian n√†y, h·ªá th·ªëng s·∫Ω xem l√† b·∫°n ƒëang m·∫•t t·∫≠p trung.</em>
                    </div>
                    <ul style="margin-top: 5px;">
                        <li><strong>C∆° ch·∫ø ho·∫°t ƒë·ªông:</strong> V√≠ d·ª• b·∫°n ƒë·∫∑t ng∆∞·ª°ng l√† <strong>12 gi√¢y</strong>.
                            <ul>
                                <li>N·∫øu b·∫°n ch·∫°m m√†n h√¨nh sau <strong>5 gi√¢y</strong>: To√†n b·ªô th·ªùi gian ƒë√≥ l√† T·ªânh th·ª©c.</li>
                                <li>N·∫øu b·∫°n ch·∫°m sau <strong>20 gi√¢y</strong>: H·ªá th·ªëng hi·ªÉu r·∫±ng b·∫°n ƒë√£ l∆° l√† ho·∫∑c h√¥n tr·∫ßm m·∫•t <strong>8 gi√¢y</strong> (20 - 12 = 8).</li>
                            </ul>
                        </li>
                        <li><strong>T√πy ch·ªânh ri√™ng bi·ªát:</strong> M·ªói lo·∫°i thi·ªÅn c·∫ßn m·ªôt nh·ªãp ƒë·ªô kh√°c nhau. B·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t ng∆∞·ª°ng th·∫•p (v√≠ d·ª• 5s) cho c√°c b√†i t·∫≠p ghi nh·∫≠n nhanh, ho·∫∑c ng∆∞·ª°ng cao (30s) cho c√°c b√†i t·∫≠p ƒë·ªãnh t√¢m s√¢u h∆°n. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông nh·ªõ c√†i ƒë·∫∑t n√†y cho t·ª´ng m·ª•c ti√™u.</li>
                    </ul>
                </li>
            </ul>

            <h4 style="color: var(--primary); margin-top: 15px;">5. Ri√™ng T∆∞ & An To√†n D·ªØ Li·ªáu</h4>
            <ul style="padding-left: 20px;">
                <li><strong>Offline Ho√†n To√†n:</strong> 100% d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ tr·ª±c ti·∫øp tr√™n tr√¨nh duy·ªát v√† thi·∫øt b·ªã c·ªßa b·∫°n. Kh√¥ng c√≥ d·ªØ li·ªáu n√†o ƒë∆∞·ª£c g·ª≠i v·ªÅ m√°y ch·ªß.</li>
                <li><strong>Sao l∆∞u & Kh√¥i ph·ª•c:</strong> D·ªÖ d√†ng xu·∫•t d·ªØ li·ªáu ra file <code>.json</code> ƒë·ªÉ c·∫•t gi·ªØ ho·∫∑c chuy·ªÉn sang thi·∫øt b·ªã kh√°c.</li>
            </ul>

            <hr style="border: 0; border-top: 1px solid var(--border); margin: 25px 0;">
            <h3 style="color: var(--text); margin-top: 20px;">‚ú® H·ªá Th·ªëng Ghi Nh·∫≠n</h3>
            
            <p><strong>M·ªëc Li√™n T·ª•c:</strong></p>
            <table class="intro-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
                <thead>
                    <tr style="background: var(--bg);">
                        <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">Danh hi·ªáu</th>
                        <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">ƒêi·ªÅu ki·ªán</th>
                        <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">√ù nghƒ©a</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">C·ªë G·∫Øng</td><td style="padding: 8px; border: 1px solid var(--border);">3 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">B∆∞·ªõc ƒë·∫ßu v∆∞·ª£t qua s·ª©c ·ª≥.</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">N·ªó L·ª±c</td><td style="padding: 8px; border: 1px solid var(--border);">10 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">B·∫Øt ƒë·∫ßu h√¨nh th√†nh th√≥i quen.</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Tinh C·∫ßn</td><td style="padding: 8px; border: 1px solid var(--border);">30 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">Th√≥i quen ƒë√£ d·∫ßn ·ªïn ƒë·ªãnh.</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Nhi·ªát T√¢m</td><td style="padding: 8px; border: 1px solid var(--border);">60 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">S·ª± tu t·∫≠p tr·ªü n√™n v·ªØng ch√£i.</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Tinh T·∫•n Gi√°c Chi</td><td style="padding: 8px; border: 1px solid var(--border);">365 ng√†y</td><td style="padding: 8px; border: 1px solid var(--border);">S·ª± ki√™n tr√¨ phi th∆∞·ªùng.</td></tr>
                </tbody>
            </table>

            <p><strong>M·ªëc Ch√°nh Ni·ªám:</strong></p>
            <table class="intro-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
                <thead>
                   <tr style="background: var(--bg);">
                        <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">M·ª©c ƒë·ªô</th>
                        <th style="padding: 8px; border: 1px solid var(--border); text-align: left;">S·ªë Ch√°nh Ni·ªám</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">S∆° C∆°</td><td style="padding: 8px; border: 1px solid var(--border);">5,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Thi·ªÅn Sinh</td><td style="padding: 8px; border: 1px solid var(--border);">10,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">H√†nh Gi·∫£</td><td style="padding: 8px; border: 1px solid var(--border);">20,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Thi·ªÅn Gi·∫£</td><td style="padding: 8px; border: 1px solid var(--border);">50,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">G∆∞∆°ng S√°ng</td><td style="padding: 8px; border: 1px solid var(--border);">80,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">M·∫∑t H·ªì Tƒ©nh L·∫∑ng</td><td style="padding: 8px; border: 1px solid var(--border);">100,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">N√∫i ƒê√°</td><td style="padding: 8px; border: 1px solid var(--border);">200,000</td></tr>
                    <tr><td style="padding: 8px; border: 1px solid var(--border);">Th·ª´a t·ª± Ph√°p</td><td style="padding: 8px; border: 1px solid var(--border);">500,000</td></tr>
                    
                </tbody>
            </table>

            <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid var(--warning); padding: 15px; border-radius: 8px; color: #fbbf24; font-size: 13px;">
                <strong>‚ö†Ô∏è L∆∞u √ù Quan Tr·ªçng V·ªÅ D·ªØ Li·ªáu:</strong>
                <ul style="margin: 5px 0 0 15px;">
                    <li>D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u trong <strong>IndexedDB</strong> c·ªßa tr√¨nh duy·ªát (An to√†n & dung l∆∞·ª£ng l·ªõn).</li>
                    <li><strong>Kh√¥ng x√≥a l·ªãch s·ª≠/cache tr√¨nh duy·ªát</strong> n·∫øu ch∆∞a sao l∆∞u, d·ªØ li·ªáu s·∫Ω b·ªã m·∫•t.</li>
                    <li><strong>C√°ch Sao L∆∞u:</strong> V√†o menu b√™n tr√°i, ch·ªçn <strong>"Sao l∆∞u"</strong> ƒë·ªÉ t·∫£i file v·ªÅ m√°y.</li>
                    <li><strong>C√°ch Kh√¥i Ph·ª•c:</strong> Ch·ªçn <strong>"Kh√¥i ph·ª•c"</strong> v√† t·∫£i l√™n file backup ƒë√£ c√≥.</li>
                </ul>
            </div>
            
             <div style="margin-top: 20px; text-align: center; color: var(--text-light); font-size: 12px; border-top: 1px solid var(--border); padding-top: 10px;">
                <strong>C√¥ng ngh·ªá:</strong> HTML5, CSS3, JS (ES6+).<br>
                <strong>Th∆∞ vi·ªán:</strong> <a href="https://www.chartjs.org/" target="_blank" style="color: var(--primary); text-decoration: none;">Chart.js</a>, <a href="https://fontawesome.com/" target="_blank" style="color: var(--primary); text-decoration: none;">FontAwesome</a>.<br>
                Link T·∫£i & M√£ Ngu·ªìn: <a href="https://github.com/buddhanussati/nhatky-hanhgia/releases"><b>t·∫°i ƒë√¢y.</b></a> Ch√∫c b·∫°n an l·∫°c v√† tinh t·∫•n!
            </div>
        </div>
        
        <div style="padding: 15px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; background: var(--surface); border-radius: 0 0 16px 16px;">
            <button class="btn btn-secondary" onclick="app.closeIntroModal()">ƒê√≥ng</button>
        </div>
    </div>
</div>
    <audio id="bell" src="./audio/bell.mp3" preload="auto"></audio>

       <script src="./js/nh.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then(reg => console.log('PWA ƒë√£ s·∫µn s√†ng:', reg.scope))
        .catch(err => console.log('L·ªói PWA:', err));
    });
  }
</script>

</body>
</html>